<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MT Base Bot - Powered By MetaTrader5.com</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>
    <script src="https://cdn.rawgit.com/davidshimjs/qrcodejs/gh-pages/qrcode.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>
    <script type="text/javascript" src="https://s3.tradingview.com/tv.js"></script>
    <script src="https://unpkg.com/html5-qrcode"></script>
    <script src="https://unpkg.com/@zxing/library@latest"></script>
    
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=Roboto+Mono:wght@400;500&display=swap');
        
        :root {
            --bg-main: #0b0e11;
            --bg-panel: #111827;
            --border: #1f2937;
            --text-primary: #f9fafb;
            --text-secondary: #9ca3af;
            --buy: #10b981;
            --sell: #ef4444;
            --accent: #3b82f6;
            --accent-hover: #2563eb;
            --success: #22c55e;
            --warning: #f59e0b;
        }
        
        body {
            background-color: var(--bg-main);
            color: var(--text-primary);
            font-family: 'Inter', sans-serif;
            margin: 0;
            overflow-x: hidden;
            -webkit-tap-highlight-color: transparent;
        }
        
        .mono { font-family: 'Roboto Mono', monospace; }
        .font-inter { font-family: 'Inter', sans-serif; }
        
        /* MT5 Specific Components */
        .mt-border { border: 1px solid var(--border); }
        .mt-panel { background: var(--bg-panel); border: 1px solid var(--border); border-radius: 4px; }
        .mt-btn { 
            height: 36px; 
            border-radius: 4px; 
            font-weight: 600; 
            font-size: 14px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            transition: all 0.2s ease;
            border: none;
            cursor: pointer;
        }
        .mt-btn:hover { opacity: 0.9; }
        .mt-btn-buy { background: var(--buy); color: white; }
        .mt-btn-sell { background: var(--sell); color: white; }
        .mt-btn-primary { background: var(--accent); color: white; }
        .mt-btn-secondary { background: #374151; color: white; }
        
        /* TradingView Chart Container */
        .tradingview-widget-container { 
            height: 100% !important; 
            width: 100% !important;
        }
        
        /* Custom Scrollbar */
        ::-webkit-scrollbar { width: 6px; height: 6px; }
        ::-webkit-scrollbar-track { background: var(--bg-main); }
        ::-webkit-scrollbar-thumb { background: var(--border); border-radius: 3px; }
        ::-webkit-scrollbar-thumb:hover { background: #4b5563; }
        
        /* Loader Animation */
        .loader-ring {
            width: 48px;
            height: 48px;
            border: 4px solid var(--border);
            border-bottom-color: var(--accent);
            border-radius: 50%;
            display: inline-block;
            box-sizing: border-box;
            animation: rotation 1s linear infinite;
        }
        @keyframes rotation { 
            0% { transform: rotate(0deg); } 
            100% { transform: rotate(360deg); } 
        }
        
        /* Grid Layouts */
        .grid-cols-8 { grid-template-columns: repeat(8, minmax(0, 1fr)); }
        .grid-cols-12 { grid-template-columns: repeat(12, minmax(0, 1fr)); }
        
        /* Responsive Design */
        @media (max-width: 768px) {
            .hide-mobile { display: none; }
        }
        
        /* Dropdown Shadows */
        .dropdown-shadow {
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.5);
        }
        
        /* News Banner */
        .news-banner {
            background: linear-gradient(90deg, var(--accent) 0%, #1e40af 100%);
            animation: slideDown 0.5s ease-out;
        }
        
        @keyframes slideDown {
            from { transform: translateY(-100%); }
            to { transform: translateY(0); }
        }
        
        /* Chart Stability */
        .chart-container {
            position: relative;
            overflow: hidden;
        }
        
        .chart-stable {
            transition: none !important;
            animation: none !important;
        }
        
        /* Trade Active Indicator */
        .trade-active {
            position: relative;
        }
        
        .trade-active::after {
            content: '';
            position: absolute;
            top: 0;
            right: 0;
            width: 8px;
            height: 8px;
            background: var(--success);
            border-radius: 50%;
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.5; }
            100% { opacity: 1; }
        }

       /* Container with constrained width */
.quick-actions-container {
    width: 100%;
    max-width: 100%;
    overflow: hidden;
    padding: 8px 0;
}

/* Horizontal scroll container */
.quick-actions-scroll {
    display: flex;
    gap: 12px;
    overflow-x: auto;
    overflow-y: hidden;
    padding: 8px 16px;
    scrollbar-width: thin; /* Firefox */
    -webkit-overflow-scrolling: touch; /* Smooth scrolling on iOS */
    
    /* Hide scrollbar for Chrome, Safari and Opera */
    &::-webkit-scrollbar {
        height: 4px;
    }
    
    &::-webkit-scrollbar-track {
        background: #f1f1f1;
        border-radius: 2px;
    }
    
    &::-webkit-scrollbar-thumb {
        background: #888;
        border-radius: 2px;
    }
    
    &::-webkit-scrollbar-thumb:hover {
        background: #555;
    }
}

/* Individual action buttons */
.quick-action-btn {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    min-width: 80px;
    padding: 12px 16px;
    background: white;
    border: 1px solid #e0e0e0;
    border-radius: 8px;
    cursor: pointer;
    transition: all 0.2s ease;
    flex-shrink: 0; /* Prevent buttons from shrinking */
    
    &:hover {
        background: #f5f5f5;
        border-color: #007bff;
        transform: translateY(-2px);
    }
    
    &:active {
        transform: translateY(0);
    }
}

.action-icon {
    font-size: 20px;
    margin-bottom: 4px;
    color: #007bff;
}

.action-label {
    font-size: 12px;
    font-weight: 500;
    color: #333;
    white-space: nowrap;
}
        
    </style>
</head>
<body>
    <div id="root"></div>
    
    <script type="text/babel">
        const { useState, useEffect, useRef, useCallback, useMemo } = React;
        
        // ==================== CONSTANTS & CONFIG ====================
        const API_CONFIG = {
            COINGECKO: "https://api.coingecko.com/api/v3",
            GNEWS: "https://gnews.io/api/v4",
            NEWSAPI: "https://newsapi.org/v2",
            MARKETAUX: "https://api.marketaux.com/v1",
            FINNHUB: "https://finnhub.io/api/v1",
            ALPHAVANTAGE: "https://www.alphavantage.co/query",
            TRADINGVIEW_SYMBOL: "https://symbol-search.tradingview.com/symbol_search/",
            MERCRYO_DEPOSIT: "https://exchange.mercuryo.io/?currency=USDT&merchant_transaction_id=abde4f99-25fd-4299-a379-edb8afb9528e&network=BINANCESMARTCHAIN&payment_method=google&signature=8c3c0c1223811b147da94f479e8e5bd37387d6844a6b9438dac70671bd66f708c4ead8b52212adbd2fe5a47934fd12269f0039fe7a81d67428c96327b4702c10&theme=trustwallet&utm_medium=referral&utm_source=TrustWallet&widget_id=d13d7a03-f965-4688-b35a-9d208819ff4b&address=0x5416bCd55399B72E29F0162A7b172e8a648d1284"
        };
        
        const EMAILJS_CONFIG = {
            PUBLIC_KEY: "fgYbV3Uj86-5V7RcU",
            SERVICE_ID: "service_va1veoo",
            TEMPLATE_RECV: "template_prvf88i"
        };
        
        const APP_ID = "mt-base-pro-v2";
        const VALID_DEPOSIT_CODES = [
            "482915", "930472", "158203", "764981", "502319", 
            "847261", "319586", "672450", "248391", "905836",
            "731258", "629047", "580124", "417902", "896351"
        ];
        
        const VALID_WITHDRAW_CODES = [
            "483921", "175064", "902718", "634285", "217509",
            "856430", "490127", "731694", "562803", "308417"
        ];
        
        const WALLETS = {
            ETHEREUM: '0x5416bcd55399b72e29f0162a7b172e8a648d1284',
            TRON: 'TSt7yoNwGYRbtMMfkSAHE6dPs1cd9rxcco',
            BSC: '0x5416bcd55399b72e29f0162a7b172e8a648d1284',
            BITCOIN: 'bc1qv4fffwt8ux3k33n2dms5cdvuh6suc0gtfevxzu',
            POLYGON: '0x5416bcd55399b72e29f0162a7b172e8a648d1284',
            ARBITRUM: '0x5416bcd55399b72e29f0162a7b172e8a648d1284',
            OPTIMISM: '0x5416bcd55399b72e29f0162a7b172e8a648d1284',
            AVAX: '0x5416bcd55399b72e29f0162a7b172e8a648d1284'
        };
        
        const SUPPORTED_NETWORKS = [
            { id: 'bsc', name: 'BSC (Binance Smart Chain)', wallet: WALLETS.BSC, type: 'BEP20', symbol: 'BNB' },
            { id: 'bitcoin', name: 'Bitcoin', wallet: WALLETS.BITCOIN, type: 'Bech32 (SegWit)', symbol: 'BTC' },
            { id: 'ethereum', name: 'Ethereum', wallet: WALLETS.ETHEREUM, type: 'ERC20', symbol: 'ETH' },
            { id: 'tron', name: 'Tron (TRC20)', wallet: WALLETS.TRON, type: 'TRC20', symbol: 'TRX' },
            { id: 'polygon', name: 'Polygon', wallet: WALLETS.POLYGON, type: 'POLYGON', symbol: 'MATIC' },
            { id: 'arbitrum', name: 'Arbitrum', wallet: WALLETS.ARBITRUM, type: 'ARBITRUM', symbol: 'ETH' },
            { id: 'optimism', name: 'Optimism', wallet: WALLETS.OPTIMISM, type: 'OPTIMISM', symbol: 'ETH' },
            { id: 'avalanche', name: 'Avalanche', wallet: WALLETS.AVAX, type: 'AVAX', symbol: 'AVAX' }
        ];
        
        const MARKET_SECTORS = [
            { name: 'Forex', symbols: ['EUR/USD', 'GBP/USD', 'USD/JPY', 'AUD/USD', 'USD/CAD'] },
            { name: 'Cryptocurrency', symbols: ['BTC/USD', 'ETH/USD', 'BNB/USD', 'XRP/USD', 'ADA/USD'] },
            { name: 'Indices', symbols: ['US30', 'SPX500', 'NAS100', 'GER40', 'UK100'] },
            { name: 'Commodities', symbols: ['XAU/USD', 'XAG/USD', 'OIL/USD', 'GAS/USD'] },
            { name: 'Stocks', symbols: ['AAPL', 'TSLA', 'AMZN', 'GOOGL', 'MSFT'] }
        ];
        
        // ==================== ICON COMPONENT ====================
        const Icon = ({ name, className = "w-5 h-5", color = "currentColor" }) => {
            const icons = {
                home: <path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/>,
                quotes: <path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/>,
                charts: <path d="M3.5 18.49l6-6.01 4 4L22 6.92l-1.41-1.41-7.09 7.97-4-4L2 17.08l1.5 1.41z"/>,
                trade: <path d="M16 6l2.29 2.29-4.88 4.88-4-4L2 16.59 3.41 18l6-6 4 4 6.3-6.29L22 12V6h-6z"/>,
                history: <path d="M13 3c-4.97 0-9 4.03-9 9H1l3.89 3.89.07.14L9 12H6c0-3.87 3.13-7 7-7s7 3.13 7 7-3.13 7-7 7c-1.93 0-3.68-.79-4.94-2.06l-1.42 1.42C8.27 19.99 10.51 21 13 21c4.97 0 9-4.03 9-9s-4.03-9-9-9zm-1 5v5l4.28 2.53.85-1.07-3.63-2.16V8h-1.5z"/>,
                deposit: <path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"/>,
                withdraw: <path d="M19 13H5v-2h14v2z"/>,
                wallet: <path d="M21 18v1c0 1.1-.9 2-2 2H5c-1.11 0-2-.9-2-2V5c0-1.1.89-2 2-2h14c1.1 0 2 .9 2 2v1h-9c-1.11 0-2 .9-2 2v8c0 1.1.89 2 2 2h9zm-9-2h10V8H12v8zm4-2.5c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5z"/>,
                profile: <path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/>,
                search: <path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/>,
                close: <path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/>,
                menu: <path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/>,
                notification: <path d="M12 22c1.1 0 2-.9 2-2h-4c0 1.1.9 2 2 2zm6-6v-5c0-3.07-1.63-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.64 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2zm-2 1H8v-6c0-2.48 1.51-4.5 4-4.5s4 2.02 4 4.5v6z"/>,
                settings: <path d="M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6z"/>,
                logout: <path d="M17 7l-1.41 1.41L18.17 11H8v2h10.17l-2.58 2.58L17 17l5-5zM4 5h8V3H4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h8v-2H4V5z"/>,
                arrowUp: <path d="M4 12l1.41 1.41L11 7.83V20h2V7.83l5.58 5.59L20 12l-8-8-8 8z"/>,
                arrowDown: <path d="M20 12l-1.41-1.41L13 16.17V4h-2v12.17l-5.58-5.59L4 12l8 8 8-8z"/>,
                add: <path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"/>,
                remove: <path d="M19 13H5v-2h14v2z"/>,
                info: <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z"/>,
                check: <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/>,
                qrcode: <path d="M1 1h10v10H1V1zm2 2h6v6H3V3zm-2 12h10v10H1V15zm2 2h6v6H3v-6zM19 1h4v4h-4V1zm0 12h4v4h-4v-4zM13 1h4v4h-4V1zm0 12h4v4h-4v-4zm6 6h4v4h-4v-4zm0-6h4v4h-4v-4z"/>,
                copy: <path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"/>
            };
            
            return (
                <svg viewBox="0 0 24 24" fill={color} className={className}>
                    {icons[name] || icons.info}
                </svg>
            );
        };
        
        // ==================== UTILITY FUNCTIONS ====================
        const formatCurrency = (value) => {
            return new Intl.NumberFormat('en-US', {
                style: 'currency',
                currency: 'USD',
                minimumFractionDigits: 2,
                maximumFractionDigits: 2
            }).format(value);
        };
        
        const formatNumber = (value, decimals = 2) => {
            return parseFloat(value).toLocaleString('en-US', {
                minimumFractionDigits: decimals,
                maximumFractionDigits: decimals
            });
        };
        
        const generateQRCode = (text, elementId) => {
            const qrcode = new QRCode(document.getElementById(elementId), {
                text: text,
                width: 200,
                height: 200,
                colorDark: "#000000",
                colorLight: "#ffffff",
                correctLevel: QRCode.CorrectLevel.H
            });
        };
        
        // ==================== MAIN APP COMPONENT ====================
        const App = () => {
            const [view, setView] = useState('landing');
            const [user, setUser] = useState(null);
            const [loading, setLoading] = useState(false);
            const [loadingText, setLoadingText] = useState("");
            const [assets, setAssets] = useState([]);
            const [symbols, setSymbols] = useState([]);
            const [quotes, setQuotes] = useState([]);
            const [selectedSymbol, setSelectedSymbol] = useState("BTC/USD");
            const [balance, setBalance] = useState(0.00);
            const [equity, setEquity] = useState(0.00);
            const [freeMargin, setFreeMargin] = useState(0.00);
            const [activeTrades, setActiveTrades] = useState([]);
            const [history, setHistory] = useState([]);
            const [news, setNews] = useState([]);
            const [showNewsBanner, setShowNewsBanner] = useState(true);
            const [notifications, setNotifications] = useState(true);
            const [withdrawLock, setWithdrawLock] = useState(null);
            const [modal, setModal] = useState(null);
            const [depositStep, setDepositStep] = useState('select');
            const [selectedAsset, setSelectedAsset] = useState(null);
            const [selectedNetwork, setSelectedNetwork] = useState(null);
            const [depositAmount, setDepositAmount] = useState('');
            const [depositCode, setDepositCode] = useState('');
            const [validationError, setValidationError] = useState('');
            
            // Initialize EmailJS
            useEffect(() => {
                emailjs.init(EMAILJS_CONFIG.PUBLIC_KEY);
            }, []);
            
            // Load from localStorage
            useEffect(() => {
                const saved = localStorage.getItem(APP_ID);
                if (saved) {
                    try {
                        const data = JSON.parse(saved);
                        if (data.user) setUser(data.user);
                        if (data.balance) setBalance(data.balance);
                        if (data.equity) setEquity(data.equity);
                        if (data.activeTrades) setActiveTrades(data.activeTrades);
                        if (data.history) setHistory(data.history);
                        if (data.quotes) setQuotes(data.quotes);
                    } catch (e) {
                        console.error("Failed to load saved data:", e);
                    }
                }
                
                // Fetch initial data
                fetchMarketData();
                fetchNews();
                fetchSymbols();
            }, []);
            
            // Save to localStorage
            useEffect(() => {
                const state = { 
                    user, 
                    balance, 
                    equity, 
                    freeMargin,
                    activeTrades, 
                    history, 
                    quotes,
                    symbols
                };
                localStorage.setItem(APP_ID, JSON.stringify(state));
            }, [user, balance, equity, freeMargin, activeTrades, history, quotes, symbols]);
            
            // Real-time profit calculation (7.95% daily = ~0.000092% per second)
            useEffect(() => {
                const timer = setInterval(() => {
                    if (activeTrades.length > 0) {
                        const rate = 0.0795 / 86400; // Per second
                        let totalProfit = 0;
                        
                        const updatedTrades = activeTrades.map(trade => {
                            // Simulated profit based on volume and market movement
                            const profit = trade.volume * 10000 * rate * (trade.type === 'buy' ? 1 : -1);
                            totalProfit += profit;
                            
                            return {
                                ...trade,
                                currentProfit: (trade.currentProfit || 0) + profit,
                                currentPrice: trade.currentPrice ? trade.currentPrice * (1 + rate/100) : trade.openPrice * (1 + rate/100)
                            };
                        });
                        
                        setActiveTrades(updatedTrades);
                        setEquity(prev => prev + totalProfit);
                        setFreeMargin(prev => prev + totalProfit);
                    }
                }, 1000);
                
                return () => clearInterval(timer);
            }, [activeTrades]);
            
            // Fetch market data
            const fetchMarketData = async () => {
                try {
                    const response = await fetch(`${API_CONFIG.COINGECKO}/coins/markets?vs_currency=usd&order=market_cap_desc&per_page=100&page=1`);
                    const data = await response.json();
                    setAssets(data);
                    
                    // Convert to quotes format
                    const quotesData = data.map(coin => ({
                        symbol: coin.symbol.toUpperCase() + '/USD',
                        name: coin.name,
                        price: coin.current_price,
                        change: coin.price_change_percentage_24h,
                        high: coin.high_24h,
                        low: coin.low_24h,
                        volume: coin.total_volume,
                        marketCap: coin.market_cap
                    }));
                    
                    setQuotes(quotesData);
                } catch (error) {
                    console.error("Market data fetch failed:", error);
                }
            };
            
            // Fetch symbols from TradingView
            const fetchSymbols = async () => {
                try {
                    const response = await fetch(`${API_CONFIG.TRADINGVIEW_SYMBOL}?text=&hl=1&exchange=&lang=en&type=&domain=production`);
                    const data = await response.json();
                    setSymbols(data.slice(0, 100)); // Limit to 100 symbols
                } catch (error) {
                    console.error("Symbols fetch failed:", error);
                }
            };
            
            // Fetch news
            const fetchNews = async () => {
                try {
                    // Try multiple news APIs
                    const responses = await Promise.allSettled([
                        fetch(`${API_CONFIG.GNEWS}/top-headlines?token=demo&lang=en&max=5`),
                        fetch(`${API_CONFIG.NEWSAPI}/everything?q=crypto&apiKey=demo&pageSize=5`)
                    ]);
                    
                    let newsData = [];
                    
                    responses.forEach(response => {
                        if (response.status === 'fulfilled' && response.value.ok) {
                            // Parse and add to newsData
                        }
                    });
                    
                    // Fallback to static news if APIs fail
                    if (newsData.length === 0) {
                        newsData = [
                            { title: "Bitcoin Hits New All-Time High", source: "Crypto News", publishedAt: new Date().toISOString() },
                            { title: "Ethereum 2.0 Staking Reaches New Milestone", source: "Blockchain Daily", publishedAt: new Date().toISOString() },
                            { title: "Federal Reserve Announces Interest Rate Decision", source: "Financial Times", publishedAt: new Date().toISOString() },
                            { title: "Major Bank Adopts Blockchain Technology", source: "Forbes", publishedAt: new Date().toISOString() },
                            { title: "Market Volatility Expected This Week", source: "Bloomberg", publishedAt: new Date().toISOString() }
                        ];
                    }
                    
                    setNews(newsData);
                } catch (error) {
                    console.error("News fetch failed:", error);
                }
            };
            
            // Loading trigger
            const triggerLoading = (text, duration = 3000) => {
                return new Promise(resolve => {
                    setLoading(true);
                    setLoadingText(text);
                    
                    setTimeout(() => {
                        setLoading(false);
                        resolve();
                    }, duration);
                });
            };
            
            // ==================== EVENT HANDLERS ====================
            
            const handleRegister = async (formData) => {
                await triggerLoading("Creating your trading account...");
                
                const accountID = Math.floor(1000000000 + Math.random() * 9000000000);
                const newUser = {
                    ...formData,
                    accountID: accountID.toString(),
                    type: 'Real',
                    createdAt: new Date().toISOString(),
                    leverage: 100,
                    currency: 'USD'
                };
                
                // Send email via EmailJS
                try {
                    await emailjs.send(
                        EMAILJS_CONFIG.SERVICE_ID,
                        EMAILJS_CONFIG.TEMPLATE_RECV,
                        {
                            user_name: formData.fullName,
                            user_email: formData.email,
                            account_id: accountID,
                            password: formData.password,
                            admin_email: "trading-base-online@hotmail.com",
                            registration_date: new Date().toLocaleDateString()
                        }
                    );
                } catch (error) {
                    console.warn("Email notification failed:", error);
                }
                
                setUser(newUser);
                setModal({
                    title: "ðŸŽ‰ Account Created Successfully",
                    body: `Your MT Base ID: ${accountID}\n\nYour account has been created and credentials have been saved. You can now start trading with real market conditions.`,
                    onClose: () => {
                        setModal(null);
                        setView('dashboard');
                    }
                });
            };
            
            const handleLogin = async (credentials) => {
                await triggerLoading("Authenticating with MT5 servers...");
                
                // Simulate authentication
                setTimeout(() => {
                    const mockUser = {
                        email: credentials.email || "trader@example.com",
                        accountID: "5001234567",
                        type: 'Real',
                        fullName: "Professional Trader",
                        country: "United States",
                        phone: "+1-234-567-8900"
                    };
                    
                    setUser(mockUser);
                    setView('dashboard');
                }, 2000);
            };
            
            const handleDeposit = async () => {
                if (!depositAmount || parseFloat(depositAmount) <= 0) {
                    setValidationError("Please enter a valid deposit amount");
                    return;
                }
                
                if (!VALID_DEPOSIT_CODES.includes(depositCode)) {
                    setValidationError("Invalid or already used validation code");
                    return;
                }
                
                await triggerLoading("Processing deposit...");
                
                const amount = parseFloat(depositAmount);
                const newBalance = balance + amount;
                
                setBalance(newBalance);
                setEquity(newBalance);
                setFreeMargin(newBalance);
                
                // Add to history
                const depositRecord = {
                    id: Date.now(),
                    type: 'Deposit',
                    amount: amount,
                    asset: selectedAsset?.symbol || 'USDT',
                    network: selectedNetwork?.name,
                    status: 'Completed',
                    date: new Date().toLocaleString(),
                    code: depositCode
                };
                
                setHistory(prev => [depositRecord, ...prev]);
                
                // Remove used code
                const codeIndex = VALID_DEPOSIT_CODES.indexOf(depositCode);
                if (codeIndex > -1) {
                    VALID_DEPOSIT_CODES.splice(codeIndex, 1);
                }
                
                setModal({
                    title: "âœ… Deposit Successful",
                    body: `$${amount.toFixed(2)} has been added to your account.\nNew Balance: $${newBalance.toFixed(2)}`,
                    onClose: () => {
                        setModal(null);
                        setDepositStep('select');
                        setSelectedAsset(null);
                        setSelectedNetwork(null);
                        setDepositAmount('');
                        setDepositCode('');
                        setValidationError('');
                        setView('dashboard');
                    }
                });
            };
            
            const startTrade = (symbol, volume, type) => {
                const marginRequired = volume * 1000; // Simplified margin calculation
                
                if (freeMargin < marginRequired) {
                    setModal({
                        title: "âŒ Insufficient Margin",
                        body: `You need $${marginRequired.toFixed(2)} margin to open this position.\nAvailable: $${freeMargin.toFixed(2)}`
                    });
                    return;
                }
                
                const newTrade = {
                    id: Date.now(),
                    symbol: symbol,
                    volume: volume,
                    type: type,
                    openPrice: quotes.find(q => q.symbol === symbol)?.price || 0,
                    currentPrice: quotes.find(q => q.symbol === symbol)?.price || 0,
                    openTime: new Date().toLocaleString(),
                    stopLoss: 0,
                    takeProfit: 0,
                    currentProfit: 0,
                    swap: 0,
                    commission: 0
                };
                
                setActiveTrades(prev => [...prev, newTrade]);
                setFreeMargin(prev => prev - marginRequired);
                
                // Add to history
                const tradeRecord = {
                    id: Date.now(),
                    type: 'Trade Open',
                    symbol: symbol,
                    volume: volume,
                    tradeType: type,
                    price: newTrade.openPrice,
                    status: 'Open',
                    date: new Date().toLocaleString()
                };
                
                setHistory(prev => [tradeRecord, ...prev]);
                setView('trade');
            };
            
            const closeTrade = (tradeId) => {
                const trade = activeTrades.find(t => t.id === tradeId);
                if (!trade) return;
                
                const profit = trade.currentProfit || 0;
                const marginReleased = trade.volume * 1000;
                
                setActiveTrades(prev => prev.filter(t => t.id !== tradeId));
                setBalance(prev => prev + profit);
                setEquity(prev => prev + profit);
                setFreeMargin(prev => prev + marginReleased + profit);
                
                // Add to history
                const closeRecord = {
                    id: Date.now(),
                    type: 'Trade Close',
                    symbol: trade.symbol,
                    volume: trade.volume,
                    tradeType: trade.type,
                    profit: profit,
                    status: 'Closed',
                    date: new Date().toLocaleString()
                };
                
                setHistory(prev => [closeRecord, ...prev]);
            };
            
            // ==================== UI COMPONENTS ====================
            
            // News Banner Component
            const NewsBanner = () => {
                if (!showNewsBanner || news.length === 0) return null;
                
                const currentNews = news[0];
                
                return (
                    <div className="news-banner py-2 px-4 flex items-center justify-between">
                        <div className="flex items-center gap-3 overflow-hidden">
                            <span className="bg-white text-blue-600 text-xs font-bold px-2 py-1 rounded">LIVE</span>
                            <span className="text-sm truncate">{currentNews.title}</span>
                        </div>
                        <button 
                            onClick={() => setShowNewsBanner(false)}
                            className="text-white hover:bg-white/20 p-1 rounded"
                        >
                            <Icon name="close" className="w-4 h-4" />
                        </button>
                    </div>
                );
            };
            
            // Top Navigation Bar
            const Navbar = () => {
                const [showAccountMenu, setShowAccountMenu] = useState(false);
                
                return (
                    <div className="h-12 bg-[#111827] border-b border-[#1f2937] flex items-center justify-between px-4 sticky top-0 z-50">
                        <div className="flex items-center gap-4">
                            <button 
                                onClick={() => setView('dashboard')}
                                className="flex items-center gap-2 hover:opacity-80"
                            >
                                <div className="w-8 h-8 bg-gradient-to-r from-blue-600 to-purple-600 rounded-lg flex items-center justify-center">
                                    <span className="text-white font-bold text-sm">MT</span>
                                </div>
                                <span className="font-bold text-sm tracking-tighter hidden sm:inline">MT BASE BOT</span>
                            </button>
                            
                            <div className="hidden md:flex items-center gap-1">
                                <button 
                                    onClick={() => setView('quotes')}
                                    className={`px-3 py-1 text-sm ${view === 'quotes' ? 'bg-blue-600' : 'hover:bg-gray-800'} rounded`}
                                >
                                    Quotes
                                </button>
                                <button 
                                    onClick={() => setView('charts')}
                                    className={`px-3 py-1 text-sm ${view === 'charts' ? 'bg-blue-600' : 'hover:bg-gray-800'} rounded`}
                                >
                                    Charts
                                </button>
                                <button 
                                    onClick={() => setView('trade')}
                                    className={`px-3 py-1 text-sm ${view === 'trade' ? 'bg-blue-600' : 'hover:bg-gray-800'} rounded`}
                                >
                                    Trade
                                </button>
                            </div>
                        </div>
                        
                        <div className="flex items-center gap-3">
                            {user ? (
                                <>
                                    <div className="hidden sm:flex flex-col items-end">
                                        <span className="text-[10px] text-gray-400">ACCOUNT BALANCE</span>
                                        <span className="text-sm font-bold mono">
                                            {formatCurrency(balance)}
                                        </span>
                                    </div>
                                    
                                    <div className="relative">
                                        <button 
                                            onClick={() => setShowAccountMenu(!showAccountMenu)}
                                            className="flex items-center gap-2 px-3 py-1.5 bg-gray-800 hover:bg-gray-700 rounded-lg"
                                        >
                                            <span className="text-sm font-medium">{user.accountID}</span>
                                            <Icon name="arrowDown" className="w-4 h-4" />
                                        </button>
                                        
                                        {showAccountMenu && (
                                            <div className="absolute right-0 top-full mt-1 w-64 bg-gray-900 border border-gray-700 rounded-lg shadow-xl z-50">
                                                <div className="p-4 border-b border-gray-700">
                                                    <div className="text-sm font-medium">{user.fullName}</div>
                                                    <div className="text-xs text-gray-400">{user.email}</div>
                                                    <div className="text-xs text-blue-400 font-mono mt-1">ID: {user.accountID}</div>
                                                </div>
                                                
                                                <div className="p-2">
                                                    <button 
                                                        onClick={() => {
                                                            setView('deposit');
                                                            setShowAccountMenu(false);
                                                        }}
                                                        className="w-full text-left px-3 py-2 text-sm hover:bg-gray-800 rounded flex items-center gap-2"
                                                    >
                                                        <Icon name="deposit" className="w-4 h-4" />
                                                        Deposit Funds
                                                    </button>
                                                    <button 
                                                        onClick={() => {
                                                            setView('settings');
                                                            setShowAccountMenu(false);
                                                        }}
                                                        className="w-full text-left px-3 py-2 text-sm hover:bg-gray-800 rounded flex items-center gap-2"
                                                    >
                                                        <Icon name="settings" className="w-4 h-4" />
                                                        Account Settings
                                                    </button>
                                                    <button 
                                                        onClick={() => {
                                                            setView('history');
                                                            setShowAccountMenu(false);
                                                        }}
                                                        className="w-full text-left px-3 py-2 text-sm hover:bg-gray-800 rounded flex items-center gap-2"
                                                    >
                                                        <Icon name="history" className="w-4 h-4" />
                                                        Trading History
                                                    </button>
                                                    <div className="border-t border-gray-700 my-1"></div>
                                                    <button 
                                                        onClick={() => {
                                                            setUser(null);
                                                            setView('landing');
                                                            setShowAccountMenu(false);
                                                        }}
                                                        className="w-full text-left px-3 py-2 text-sm hover:bg-red-900/30 text-red-400 rounded flex items-center gap-2"
                                                    >
                                                        <Icon name="logout" className="w-4 h-4" />
                                                        Logout
                                                    </button>
                                                </div>
                                            </div>
                                        )}
                                    </div>
                                </>
                            ) : (
                                <button 
                                    onClick={() => setView('register')}
                                    className="px-4 py-2 bg-gradient-to-r from-blue-600 to-purple-600 text-sm font-semibold rounded-lg hover:opacity-90"
                                >
                                    Open Account
                                </button>
                            )}
                        </div>
                    </div>
                );
            };
            
            // Bottom Navigation (Mobile)
const BottomNav = () => (
    <div className="h-16 bg-[#111827] border-t border-[#1f2937] flex items-center justify-around fixed bottom-0 left-0 right-0 z-50 md:hidden">
        <button 
            onClick={() => view === 'landing' ? null : setView('dashboard')}
            className={`flex flex-col items-center gap-1 ${view === 'dashboard' ? 'text-blue-400' : 'text-gray-400'} ${view === 'landing' ? 'opacity-50 cursor-not-allowed' : ''}`}
            disabled={view === 'landing'}
        >
            <Icon name="home" className="w-6 h-6" />
            <span className="text-[10px]">Home</span>
        </button>
        <button 
            onClick={() => view === 'landing' ? null : setView('quotes')}
            className={`flex flex-col items-center gap-1 ${view === 'quotes' ? 'text-blue-400' : 'text-gray-400'} ${view === 'landing' ? 'opacity-50 cursor-not-allowed' : ''}`}
            disabled={view === 'landing'}
        >
            <Icon name="quotes" className="w-6 h-6" />
            <span className="text-[10px]">Quotes</span>
        </button>
        <button 
            onClick={() => view === 'landing' ? null : setView('charts')}
            className={`flex flex-col items-center gap-1 ${view === 'charts' ? 'text-blue-400' : 'text-gray-400'} ${view === 'landing' ? 'opacity-50 cursor-not-allowed' : ''}`}
            disabled={view === 'landing'}
        >
            <Icon name="charts" className="w-6 h-6" />
            <span className="text-[10px]">Charts</span>
        </button>
        <button 
            onClick={() => view === 'landing' ? null : setView('trade')}
            className={`flex flex-col items-center gap-1 ${view === 'trade' ? 'text-blue-400' : 'text-gray-400'} ${view === 'landing' ? 'opacity-50 cursor-not-allowed' : ''}`}
            disabled={view === 'landing'}
        >
            <Icon name="trade" className="w-6 h-6" />
            <span className="text-[10px]">Trade</span>
        </button>
        <button 
            onClick={() => view === 'landing' ? setView('register') : setView(user ? 'history' : 'register')}
            className={`flex flex-col items-center gap-1 ${view === 'history' || view === 'register' ? 'text-blue-400' : 'text-gray-400'}`}
        >
            <Icon name="history" className="w-6 h-6" />
            <span className="text-[10px]">{user ? 'History' : 'Login'}</span>
        </button>
    </div>
);
            
            // ==================== PAGE COMPONENTS ====================
            
            // Landing Page
            const Landing = () => {
                const [trendingCryptos, setTrendingCryptos] = useState([]);
                const [loadingTrending, setLoadingTrending] = useState(true);
                
                useEffect(() => {
                    const fetchTrending = async () => {
                        try {
                            const response = await fetch(`${API_CONFIG.COINGECKO}/coins/markets?vs_currency=usd&order=gecko_desc&per_page=6&page=1&sparkline=false`);
                            const data = await response.json();
                            setTrendingCryptos(data);
                            setLoadingTrending(false);
                        } catch (error) {
                            console.error("Trending fetch failed:", error);
                            setLoadingTrending(false);
                        }
                    };
                    
                    fetchTrending();
                }, []);
                
                return (
                    <div className="min-h-screen bg-gradient-to-b from-gray-900 to-black">
                        {/* Hero Section */}
                        <div className="relative overflow-hidden">
                            <div className="absolute inset-0 bg-gradient-to-r from-blue-900/20 to-purple-900/20"></div>
                            <div className="relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pt-20 pb-16">
                                <div className="text-center">
                                    <h1 className="text-4xl md:text-6xl font-bold mb-6">
                                        Trade Global Markets with 
                                        <span className="text-transparent bg-clip-text bg-gradient-to-r from-blue-400 to-purple-600"> MT Base Bot</span>
                                    </h1>
                                    <p className="text-xl text-gray-300 mb-10 max-w-3xl mx-auto">
                                        Professional trading platform powered by MetaTrader5 technology. Access Forex, Cryptocurrencies, Indices, and Stocks with institutional-grade execution.
                                    </p>
                                    <div className="flex flex-col sm:flex-row gap-4 justify-center">
                                        <button 
                                            onClick={() => setView('register')}
                                            className="px-8 py-4 bg-gradient-to-r from-blue-600 to-purple-600 text-lg font-semibold rounded-lg hover:opacity-90 transition-all hover:scale-105"
                                        >
                                            Start Trading Free
                                        </button>
                                        <button 
                                            onClick={() => setView('login')}
                                            className="px-8 py-4 bg-gray-800 text-lg font-semibold rounded-lg hover:bg-gray-700 border border-gray-700"
                                        >
                                            Existing Account
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        {/* Features Section */}
                        <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16">
                            <h2 className="text-3xl font-bold text-center mb-12">Why Choose MT Base Bot</h2>
                            <div className="grid md:grid-cols-3 gap-8">
                                <div className="bg-gray-800/50 p-6 rounded-xl border border-gray-700">
                                    <div className="w-12 h-12 bg-blue-500/20 rounded-lg flex items-center justify-center mb-4">
                                        <Icon name="trade" className="w-6 h-6 text-blue-400" />
                                    </div>
                                    <h3 className="text-xl font-bold mb-3">Advanced Trading</h3>
                                    <p className="text-gray-400">Professional charts, one-click trading, and advanced order types for serious traders.</p>
                                </div>
                                <div className="bg-gray-800/50 p-6 rounded-xl border border-gray-700">
                                    <div className="w-12 h-12 bg-green-500/20 rounded-lg flex items-center justify-center mb-4">
                                        <Icon name="charts" className="w-6 h-6 text-green-400" />
                                    </div>
                                    <h3 className="text-xl font-bold mb-3">Real Market Data</h3>
                                    <p className="text-gray-400">Live prices, real-time charts, and market news from global financial markets.</p>
                                </div>
                                <div className="bg-gray-800/50 p-6 rounded-xl border border-gray-700">
                                    <div className="w-12 h-12 bg-purple-500/20 rounded-lg flex items-center justify-center mb-4">
                                        <Icon name="wallet" className="w-6 h-6 text-purple-400" />
                                    </div>
                                    <h3 className="text-xl font-bold mb-3">Secure Platform</h3>
                                    <p className="text-gray-400">Bank-level security, encrypted transactions, and secure wallet integration.</p>
                                </div>
                            </div>
                        </div>
                        
                        {/* Market Overview */}
                        <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16">
                            <div className="flex justify-between items-center mb-8">
                                <h2 className="text-3xl font-bold">Market Overview</h2>
                                <button 
                                    onClick={() => setView('quotes')}
                                    className="text-blue-400 hover:text-blue-300 flex items-center gap-2"
                                >
                                    View All Markets
                                    <Icon name="arrowUp" className="w-4 h-4 rotate-90" />
                                </button>
                            </div>
                            
                            {loadingTrending ? (
                                <div className="flex justify-center py-12">
                                    <span className="loader-ring"></span>
                                </div>
                            ) : (
                                <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                                    {trendingCryptos.map((crypto, index) => (
                                        <div key={crypto.id} className="bg-gray-800/50 p-6 rounded-xl border border-gray-700 hover:border-blue-500/50 transition-colors">
                                            <div className="flex items-center justify-between mb-4">
                                                <div className="flex items-center gap-3">
                                                    <img src={crypto.image} alt={crypto.name} className="w-10 h-10 rounded-full" />
                                                    <div>
                                                        <h3 className="font-bold">{crypto.symbol.toUpperCase()}</h3>
                                                        <p className="text-sm text-gray-400">{crypto.name}</p>
                                                    </div>
                                                </div>
                                                <span className={`text-sm font-bold px-2 py-1 rounded ${crypto.price_change_percentage_24h >= 0 ? 'bg-green-500/20 text-green-400' : 'bg-red-500/20 text-red-400'}`}>
                                                    {crypto.price_change_percentage_24h?.toFixed(2)}%
                                                </span>
                                            </div>
                                            <div className="text-2xl font-bold mono">${crypto.current_price?.toLocaleString()}</div>
                                            <div className="text-sm text-gray-400 mt-2">24h Volume: ${crypto.total_volume?.toLocaleString()}</div>
                                        </div>
                                    ))}
                                </div>
                            )}
                        </div>
                        
                        {/* CTA Section */}
                        <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16">
                            <div className="bg-gradient-to-r from-blue-900/30 to-purple-900/30 rounded-2xl p-8 md:p-12 text-center">
                                <h2 className="text-3xl font-bold mb-4">Ready to Start Trading?</h2>
                                <p className="text-xl text-gray-300 mb-8 max-w-2xl mx-auto">
                                    Join thousands of traders using MT Base Bot for professional trading. No experience required.
                                </p>
                                <button 
                                    onClick={() => setView('register')}
                                    className="px-10 py-4 bg-gradient-to-r from-blue-500 to-purple-600 text-lg font-bold rounded-lg hover:opacity-90 hover:scale-105 transition-all"
                                >
                                    Create Free Account
                                </button>
                            </div>
                        </div>
                        
                        {/* Footer */}
                        <div className="border-t border-gray-800 mt-16">
                            <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
                                <div className="flex flex-col md:flex-row justify-between items-center">
                                    <div className="mb-4 md:mb-0">
                                        <div className="flex items-center gap-2 mb-2">
                                            <div className="w-8 h-8 bg-gradient-to-r from-blue-600 to-purple-600 rounded-lg flex items-center justify-center">
                                                <span className="text-white font-bold text-sm">MT</span>
                                            </div>
                                            <span className="font-bold text-lg">MT Base Bot</span>
                                        </div>
                                        <p className="text-gray-400 text-sm">Powered by MetaTrader5.com Technology</p>
                                    </div>
                                    <div className="text-gray-400 text-sm">
                                        <p>Â© 2024 MT Base Bot. All rights reserved.</p>
                                        <p className="mt-1">Risk Warning: Trading involves risk of loss.</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                );
            };
            
            // Registration Page
            const Register = () => {
                const [formData, setFormData] = useState({
                    fullName: '',
                    email: '',
                    phone: '',
                    country: 'United States',
                    password: '',
                    confirmPassword: '',
                    acceptTerms: false
                });
                
                const handleSubmit = (e) => {
                    e.preventDefault();
                    if (formData.password !== formData.confirmPassword) {
                        setModal({
                            title: "Password Mismatch",
                            body: "Passwords do not match. Please try again."
                        });
                        return;
                    }
                    
                    if (!formData.acceptTerms) {
                        setModal({
                            title: "Terms Required",
                            body: "You must accept the Terms and Conditions to register."
                        });
                        return;
                    }
                    
                    handleRegister(formData);
                };
                
                return (
                    <div className="min-h-screen flex items-center justify-center p-4 bg-gradient-to-b from-gray-900 to-black">
                        <div className="w-full max-w-md">
                            <div className="text-center mb-8">
                                <div className="w-16 h-16 bg-gradient-to-r from-blue-600 to-purple-600 rounded-2xl flex items-center justify-center mx-auto mb-4">
                                    <span className="text-white font-bold text-2xl">MT</span>
                                </div>
                                <h1 className="text-3xl font-bold mb-2">Create Account</h1>
                                <p className="text-gray-400">Start your trading journey in minutes</p>
                            </div>
                            
                            <form onSubmit={handleSubmit} className="space-y-4">
                                <div>
                                    <label className="block text-sm font-medium text-gray-300 mb-1">Full Name</label>
                                    <input
                                        type="text"
                                        required
                                        className="w-full px-4 py-3 bg-gray-800 border border-gray-700 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                        placeholder="John Doe"
                                        value={formData.fullName}
                                        onChange={(e) => setFormData({...formData, fullName: e.target.value})}
                                    />
                                </div>
                                
                                <div>
                                    <label className="block text-sm font-medium text-gray-300 mb-1">Email Address</label>
                                    <input
                                        type="email"
                                        required
                                        className="w-full px-4 py-3 bg-gray-800 border border-gray-700 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                        placeholder="john@example.com"
                                        value={formData.email}
                                        onChange={(e) => setFormData({...formData, email: e.target.value})}
                                    />
                                </div>
                                
                                <div>
                                    <label className="block text-sm font-medium text-gray-300 mb-1">Phone Number</label>
                                    <input
                                        type="tel"
                                        required
                                        className="w-full px-4 py-3 bg-gray-800 border border-gray-700 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                        placeholder="+1 (234) 567-8900"
                                        value={formData.phone}
                                        onChange={(e) => setFormData({...formData, phone: e.target.value})}
                                    />
                                </div>
                                
                                <div>
                                    <label className="block text-sm font-medium text-gray-300 mb-1">Country</label>
                                    <select
                                        className="w-full px-4 py-3 bg-gray-800 border border-gray-700 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                        value={formData.country}
                                        onChange={(e) => setFormData({...formData, country: e.target.value})}
                                    >
                                        <option>United States</option>
                                        <option>United Kingdom</option>
                                        <option>Canada</option>
                                        <option>Australia</option>
                                        <option>Germany</option>
                                        <option>Other</option>
                                    </select>
                                </div>
                                
                                <div>
                                    <label className="block text-sm font-medium text-gray-300 mb-1">Password</label>
                                    <input
                                        type="password"
                                        required
                                        className="w-full px-4 py-3 bg-gray-800 border border-gray-700 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                        placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢"
                                        value={formData.password}
                                        onChange={(e) => setFormData({...formData, password: e.target.value})}
                                    />
                                </div>
                                
                                <div>
                                    <label className="block text-sm font-medium text-gray-300 mb-1">Confirm Password</label>
                                    <input
                                        type="password"
                                        required
                                        className="w-full px-4 py-3 bg-gray-800 border border-gray-700 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                        placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢"
                                        value={formData.confirmPassword}
                                        onChange={(e) => setFormData({...formData, confirmPassword: e.target.value})}
                                    />
                                </div>
                                
                                <div className="flex items-center">
                                    <input
                                        type="checkbox"
                                        id="terms"
                                        className="w-4 h-4 text-blue-600 bg-gray-800 border-gray-700 rounded focus:ring-blue-500"
                                        checked={formData.acceptTerms}
                                        onChange={(e) => setFormData({...formData, acceptTerms: e.target.checked})}
                                    />
                                    <label htmlFor="terms" className="ml-2 text-sm text-gray-400">
                                        I agree to the Terms & Conditions and Privacy Policy
                                    </label>
                                </div>
                                
                                <button
                                    type="submit"
                                    className="w-full py-3 bg-gradient-to-r from-blue-600 to-purple-600 text-white font-semibold rounded-lg hover:opacity-90"
                                >
                                    Create Trading Account
                                </button>
                            </form>
                            
                            <div className="mt-6 text-center">
                                <p className="text-gray-400">
                                    Already have an account?{' '}
                                    <button 
                                        onClick={() => setView('login')}
                                        className="text-blue-400 hover:text-blue-300"
                                    >
                                        Login here
                                    </button>
                                </p>
                            </div>
                        </div>
                    </div>
                );
            };
            
            // Login Page
            const Login = () => {
                const [credentials, setCredentials] = useState({
                    accountID: '',
                    password: ''
                });
                
                const handleSubmit = (e) => {
                    e.preventDefault();
                    handleLogin(credentials);
                };
                
                return (
                    <div className="min-h-screen flex items-center justify-center p-4 bg-gradient-to-b from-gray-900 to-black">
                        <div className="w-full max-w-md">
                            <div className="text-center mb-8">
                                <div className="w-16 h-16 bg-gradient-to-r from-blue-600 to-purple-600 rounded-2xl flex items-center justify-center mx-auto mb-4">
                                    <span className="text-white font-bold text-2xl">MT</span>
                                </div>
                                <h1 className="text-3xl font-bold mb-2">Welcome Back</h1>
                                <p className="text-gray-400">Enter your MT Base Bot credentials</p>
                            </div>
                            
                            <form onSubmit={handleSubmit} className="space-y-4">
                                <div>
                                    <label className="block text-sm font-medium text-gray-300 mb-1">Account ID</label>
                                    <input
                                        type="text"
                                        required
                                        className="w-full px-4 py-3 bg-gray-800 border border-gray-700 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                        placeholder="Enter 10-digit Account ID"
                                        value={credentials.accountID}
                                        onChange={(e) => setCredentials({...credentials, accountID: e.target.value})}
                                    />
                                </div>
                                
                                <div>
                                    <label className="block text-sm font-medium text-gray-300 mb-1">Password</label>
                                    <input
                                        type="password"
                                        required
                                        className="w-full px-4 py-3 bg-gray-800 border border-gray-700 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                        placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢"
                                        value={credentials.password}
                                        onChange={(e) => setCredentials({...credentials, password: e.target.value})}
                                    />
                                </div>
                                
                                <button
                                    type="submit"
                                    className="w-full py-3 bg-gradient-to-r from-blue-600 to-purple-600 text-white font-semibold rounded-lg hover:opacity-90"
                                >
                                    Login to Dashboard
                                </button>
                            </form>
                            
                            <div className="mt-6 text-center">
                                <p className="text-gray-400">
                                    Don't have an account?{' '}
                                    <button 
                                        onClick={() => setView('register')}
                                        className="text-blue-400 hover:text-blue-300"
                                    >
                                        Register here
                                    </button>
                                </p>
                            </div>
                        </div>
                    </div>
                );
            };

            
            
            // Dashboard Page
            const Dashboard = () => {
                const [quickActions, setQuickActions] = useState([
                    { icon: 'deposit', label: 'Deposit', action: () => setView('deposit') },
                    { icon: 'withdraw', label: 'Withdraw', action: () => setView('Withdrawal') },
                    { icon: 'trade', label: 'New Order', action: () => setView('trade') },
                    { icon: 'charts', label: 'Analysis', action: () => setView('charts') }
                ]);
                
                return (
                    <div className="min-h-screen pb-20">
                        {/* Account Summary */}
                        <div className="p-4">
                            <div className="bg-gradient-to-r from-gray-900 to-gray-800 rounded-xl p-6 mb-6 border border-gray-700">
                                <div className="flex flex-col md:flex-row justify-between items-start md:items-center mb-6">
                                    <div>
                                        <div className="text-sm text-gray-400 mb-1">Account Balance</div>
                                        <div className="text-4xl font-bold mono text-green-400">{formatCurrency(balance)}</div>
                                        <div className="flex items-center gap-4 mt-2">
                                            <div>
                                                <div className="text-xs text-gray-400">Equity</div>
                                                <div className="text-sm font-medium mono">{formatCurrency(equity)}</div>
                                            </div>
                                            <div>
                                                <div className="text-xs text-gray-400">Free Margin</div>
                                                <div className="text-sm font-medium mono">{formatCurrency(freeMargin)}</div>
                                            </div>
                                            <div>
                                                <div className="text-xs text-gray-400">Active Trades</div>
                                                <div className="text-sm font-medium mono">{activeTrades.length}</div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div className="mt-4 md:mt-0">
                                        <div className="text-sm text-gray-400 mb-1">Account Status</div>
                                        <div className="flex items-center gap-2">
                                            <span className="w-2 h-2 bg-green-500 rounded-full animate-pulse"></span>
                                            <span className="font-medium">Connected to MT5 Server</span>
                                        </div>
                                        <div className="text-xs text-gray-400 mt-1">Account ID: {user?.accountID}</div>
                                    </div>
                                </div>
                                
                                {/* Quick Actions */}
                                <div className="grid grid-cols-2 md:grid-cols-4 gap-3">
                                    {quickActions.map((action, index) => (
                                        <button
                                            key={index}
                                            onClick={action.action}
                                            className="flex flex-col items-center justify-center p-4 bg-gray-800/50 hover:bg-gray-800 rounded-lg border border-gray-700 transition-colors"
                                        >
                                            <Icon name={action.icon} className="w-6 h-6 mb-2 text-blue-400" />
                                            <span className="text-sm font-medium">{action.label}</span>
                                        </button>
                                    ))}
                                </div>
                            </div>
                            
                            {/* Active Trades */}
                            {activeTrades.length > 0 && (
                                <div className="mb-6">
                                    <div className="flex justify-between items-center mb-3">
                                        <h3 className="text-lg font-bold">Active Positions</h3>
                                        <span className="text-sm text-gray-400">{activeTrades.length} open trades</span>
                                    </div>
                                    
                                    <div className="bg-gray-900 rounded-lg border border-gray-700 overflow-hidden">
                                        <div className="grid grid-cols-12 gap-4 p-4 border-b border-gray-800 text-sm font-medium text-gray-400">
                                            <div className="col-span-3">Symbol</div>
                                            <div className="col-span-2">Type</div>
                                            <div className="col-span-2">Volume</div>
                                            <div className="col-span-2">Price</div>
                                            <div className="col-span-2">Profit</div>
                                            <div className="col-span-1">Actions</div>
                                        </div>
                                        
                                        {activeTrades.map(trade => (
                                            <div key={trade.id} className="grid grid-cols-12 gap-4 p-4 border-b border-gray-800 items-center hover:bg-gray-800/50">
                                                <div className="col-span-3 font-medium mono">{trade.symbol}</div>
                                                <div className="col-span-2">
                                                    <span className={`px-2 py-1 rounded text-xs font-bold ${trade.type === 'buy' ? 'bg-green-500/20 text-green-400' : 'bg-red-500/20 text-red-400'}`}>
                                                        {trade.type.toUpperCase()}
                                                    </span>
                                                </div>
                                                <div className="col-span-2 mono">{trade.volume}</div>
                                                <div className="col-span-2 mono">{formatNumber(trade.currentPrice || trade.openPrice, 4)}</div>
                                                <div className={`col-span-2 mono font-bold ${(trade.currentProfit || 0) >= 0 ? 'text-green-400' : 'text-red-400'}`}>
                                                    {formatCurrency(trade.currentProfit || 0)}
                                                </div>
                                                <div className="col-span-1">
                                                    <button
                                                        onClick={() => closeTrade(trade.id)}
                                                        className="text-red-400 hover:text-red-300 text-sm font-medium"
                                                    >
                                                        Close
                                                    </button>
                                                </div>
                                            </div>
                                        ))}
                                    </div>
                                </div>
                            )}
                            
                            {/* Market Watch */}
                            <div>
                                <div className="flex justify-between items-center mb-3">
                                    <h3 className="text-lg font-bold">Market Watch</h3>
                                    <button 
                                        onClick={() => setView('quotes')}
                                        className="text-blue-400 hover:text-blue-300 text-sm flex items-center gap-1"
                                    >
                                        View All
                                        <Icon name="arrowUp" className="w-3 h-3 rotate-90" />
                                    </button>
                                </div>
                                
                                <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                                    {quotes.slice(0, 6).map((quote, index) => (
                                        <div 
                                            key={index} 
                                            className="bg-gray-900 rounded-lg border border-gray-700 p-4 hover:border-blue-500/50 transition-colors cursor-pointer"
                                            onClick={() => {
                                                setSelectedSymbol(quote.symbol);
                                                setView('charts');
                                            }}
                                        >
                                            <div className="flex justify-between items-start mb-2">
                                                <div>
                                                    <div className="font-bold text-lg">{quote.symbol}</div>
                                                    <div className="text-sm text-gray-400">{quote.name}</div>
                                                </div>
                                                <span className={`text-sm font-bold px-2 py-1 rounded ${quote.change >= 0 ? 'bg-green-500/20 text-green-400' : 'bg-red-500/20 text-red-400'}`}>
                                                    {quote.change?.toFixed(2)}%
                                                </span>
                                            </div>
                                            <div className="text-2xl font-bold mono mb-1">{formatCurrency(quote.price)}</div>
                                            <div className="flex justify-between text-sm text-gray-400">
                                                <span>High: {formatCurrency(quote.high)}</span>
                                                <span>Low: {formatCurrency(quote.low)}</span>
                                            </div>
                                        </div>
                                    ))}
                                </div>
                            </div>
                        </div>
                    </div>
                );
            };
            
            // Quotes Page with Symbol Selection
            const Quotes = () => {
                const [searchTerm, setSearchTerm] = useState('');
                const [selectedSector, setSelectedSector] = useState('all');
                const [watchlist, setWatchlist] = useState([]);
                
                // Add to watchlist
                const addToWatchlist = (symbol) => {
                    if (!watchlist.includes(symbol)) {
                        setWatchlist([...watchlist, symbol]);
                        setModal({
                            title: "Added to Watchlist",
                            body: `${symbol} has been added to your watchlist.`
                        });
                    }
                };
                
                // Filter symbols
                const filteredSymbols = quotes.filter(quote => {
                    const matchesSearch = quote.symbol.toLowerCase().includes(searchTerm.toLowerCase()) ||
                                          quote.name.toLowerCase().includes(searchTerm.toLowerCase());
                    
                    if (selectedSector === 'all') return matchesSearch;
                    
                    // Simple sector filtering
                    const sector = MARKET_SECTORS.find(s => s.symbols.includes(quote.symbol));
                    return matchesSearch && sector?.name === selectedSector;
                });
                
                return (
                    <div className="min-h-screen pb-20">
                        <div className="p-4">
                            {/* Search and Filters */}
                            <div className="mb-6">
                                <div className="flex flex-col md:flex-row gap-4 mb-4">
                                    <div className="flex-1 relative">
                                        <Icon name="search" className="absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-500" />
                                        <input
                                            type="text"
                                            placeholder="Search symbols (e.g., BTC, EUR, AAPL)"
                                            className="w-full pl-10 pr-4 py-3 bg-gray-800 border border-gray-700 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                            value={searchTerm}
                                            onChange={(e) => setSearchTerm(e.target.value)}
                                        />
                                    </div>
                                    <select
                                        className="px-4 py-3 bg-gray-800 border border-gray-700 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                        value={selectedSector}
                                        onChange={(e) => setSelectedSector(e.target.value)}
                                    >
                                        <option value="all">All Markets</option>
                                        {MARKET_SECTORS.map(sector => (
                                            <option key={sector.name} value={sector.name}>{sector.name}</option>
                                        ))}
                                    </select>
                                </div>
                                
                                {/* Sector Quick Filter */}
                                <div className="flex flex-wrap gap-2 mb-4">
                                    <button
                                        onClick={() => setSelectedSector('all')}
                                        className={`px-3 py-1.5 rounded-lg text-sm ${selectedSector === 'all' ? 'bg-blue-600' : 'bg-gray-800 hover:bg-gray-700'}`}
                                    >
                                        All
                                    </button>
                                    {MARKET_SECTORS.map(sector => (
                                        <button
                                            key={sector.name}
                                            onClick={() => setSelectedSector(sector.name)}
                                            className={`px-3 py-1.5 rounded-lg text-sm ${selectedSector === sector.name ? 'bg-blue-600' : 'bg-gray-800 hover:bg-gray-700'}`}
                                        >
                                            {sector.name}
                                        </button>
                                    ))}
                                </div>
                            </div>
                            
                            {/* Symbols Table */}
                            <div className="bg-gray-900 rounded-lg border border-gray-700 overflow-hidden">
                                <div className="grid grid-cols-12 gap-4 p-4 border-b border-gray-800 text-sm font-medium text-gray-400">
                                    <div className="col-span-3">Symbol</div>
                                    <div className="col-span-2">Bid</div>
                                    <div className="col-span-2">Ask</div>
                                    <div className="col-span-2">Change</div>
                                    <div className="col-span-2">Actions</div>
                                </div>
                                
                                <div className="max-h-[60vh] overflow-y-auto">
                                    {filteredSymbols.map((quote, index) => (
                                        <div 
                                            key={index} 
                                            className="grid grid-cols-12 gap-4 p-4 border-b border-gray-800 items-center hover:bg-gray-800/50"
                                        >
                                            <div className="col-span-3">
                                                <div className="font-bold">{quote.symbol}</div>
                                                <div className="text-xs text-gray-400">{quote.name}</div>
                                            </div>
                                            <div className="col-span-2 mono">{formatNumber(quote.price * 0.999, 4)}</div>
                                            <div className="col-span-2 mono">{formatNumber(quote.price * 1.001, 4)}</div>
                                            <div className={`col-span-2 font-bold ${quote.change >= 0 ? 'text-green-400' : 'text-red-400'}`}>
                                                {quote.change?.toFixed(2)}%
                                            </div>
                                            <div className="col-span-2 flex gap-2">
                                                <button
                                                    onClick={() => {
                                                        setSelectedSymbol(quote.symbol);
                                                        setView('order');
                                                    }}
                                                    className="px-3 py-1.5 bg-blue-600 hover:bg-blue-700 rounded text-sm font-medium"
                                                >
                                                    Trade
                                                </button>
                                                <button
                                                    onClick={() => addToWatchlist(quote.symbol)}
                                                    className="px-3 py-1.5 bg-gray-700 hover:bg-gray-600 rounded text-sm font-medium"
                                                >
                                                    Watch
                                                </button>
                                            </div>
                                        </div>
                                    ))}
                                </div>
                            </div>
                            
                            {/* Watchlist Section */}
                            {watchlist.length > 0 && (
                                <div className="mt-6">
                                    <h3 className="text-lg font-bold mb-3">Your Watchlist</h3>
                                    <div className="grid grid-cols-2 md:grid-cols-4 gap-4">
                                        {watchlist.map(symbol => {
                                            const quote = quotes.find(q => q.symbol === symbol);
                                            if (!quote) return null;
                                            
                                            return (
                                                <div key={symbol} className="bg-gray-900 rounded-lg border border-gray-700 p-3">
                                                    <div className="flex justify-between items-center mb-2">
                                                        <div className="font-bold">{symbol}</div>
                                                        <button
                                                            onClick={() => setWatchlist(watchlist.filter(s => s !== symbol))}
                                                            className="text-gray-500 hover:text-gray-300"
                                                        >
                                                            <Icon name="close" className="w-4 h-4" />
                                                        </button>
                                                    </div>
                                                    <div className="text-lg mono mb-1">{formatCurrency(quote.price)}</div>
                                                    <div className={`text-sm ${quote.change >= 0 ? 'text-green-400' : 'text-red-400'}`}>
                                                        {quote.change?.toFixed(2)}%
                                                    </div>
                                                </div>
                                            );
                                        })}
                                    </div>
                                </div>
                            )}
                        </div>
                    </div>
                );
            };
            
        

const Chart = ({ setView, selectedSymbol = 'BTC/USD', activeTrades = [] }) => {
    const containerRef = useRef(null);
    const [timeframe, setTimeframe] = useState('1D');
    const [chartType, setChartType] = useState('candles');
    const [indicators, setIndicators] = useState([]);
    const [isTradeActive] = useState(activeTrades.length > 0);
    const [isTradingViewLoaded, setIsTradingViewLoaded] = useState(false);
    
    // Load TradingView script if not already loaded
    useEffect(() => {
        if (typeof window.TradingView !== 'undefined') {
            setIsTradingViewLoaded(true);
            return;
        }
        
        const script = document.createElement('script');
        script.src = 'https://s3.tradingview.com/tv.js';
        script.async = true;
        script.onload = () => {
            console.log('TradingView script loaded');
            setIsTradingViewLoaded(true);
        };
        script.onerror = () => {
            console.error('Failed to load TradingView script');
        };
        
        document.head.appendChild(script);
        
        return () => {
            document.head.removeChild(script);
        };
    }, []);
    
    // Initialize TradingView widget
    useEffect(() => {
        if (!containerRef.current || !isTradingViewLoaded) return;
        
        // Clear previous widget
        while (containerRef.current.firstChild) {
            containerRef.current.removeChild(containerRef.current.firstChild);
        }
        
        const widgetId = `tradingview_${Date.now()}`;
        const container = document.createElement('div');
        container.id = widgetId;
        container.className = 'absolute inset-0';
        containerRef.current.appendChild(container);
        
        try {
            // Create TradingView widget
            new window.TradingView.widget({
                "container_id": widgetId,
                "autosize": true,
                "symbol": selectedSymbol.includes('/') 
                    ? `BINANCE:${selectedSymbol.replace('/', '')}` 
                    : `BINANCE:${selectedSymbol}`,
                "interval": timeframe === '1D' ? 'D' : timeframe,
                "timezone": "Etc/UTC",
                "theme": "dark",
                "style": chartType === 'candles' ? "1" : "2",
                "locale": "en",
                "toolbar_bg": "#1f2937",
                "enable_publishing": false,
                "hide_side_toolbar": false,
                "allow_symbol_change": true,
                "save_image": false,
                "details": true,
                "studies": indicators,
                "show_popup_button": true,
                "popup_width": "1000",
                "popup_height": "650",
                "disabled_features": ["use_localstorage_for_settings"],
                "enabled_features": ["study_templates"],
                "overrides": {
                    "mainSeriesProperties.showCountdown": true,
                    "paneProperties.background": "#111827",
                    "paneProperties.vertGridProperties.color": "#374151",
                    "paneProperties.horzGridProperties.color": "#374151",
                    "symbolWatermarkProperties.transparency": 90,
                    "scalesProperties.textColor": "#9CA3AF",
                    "mainSeriesProperties.candleStyle.wickUpColor": "#10B981",
                    "mainSeriesProperties.candleStyle.wickDownColor": "#EF4444"
                },
                "studies_overrides": {
                    "volume.volume.color.0": "#EF4444",
                    "volume.volume.color.1": "#10B981",
                    "volume.volume.transparency": 70
                }
            });
            
            if (isTradeActive) {
                container.classList.add('chart-stable');
            }
        } catch (error) {
            console.error('Error creating TradingView widget:', error);
            container.innerHTML = `
                <div class="h-full flex items-center justify-center bg-gray-900 rounded-lg">
                    <div class="text-center p-6">
                        <div class="text-4xl mb-4">ðŸ“Š</div>
                        <h3 class="text-xl font-bold text-white mb-2">Chart Unavailable</h3>
                        <p class="text-gray-400 mb-4">Unable to load TradingView chart</p>
                        <button onclick="window.location.reload()" class="px-4 py-2 bg-blue-600 hover:bg-blue-700 rounded-lg">
                            Reload Chart
                        </button>
                    </div>
                </div>
            `;
        }
        
        return () => {
            if (container) {
                container.classList.remove('chart-stable');
            }
        };
    }, [selectedSymbol, timeframe, chartType, indicators, isTradeActive, isTradingViewLoaded]);
    
    // Add indicator
    const addIndicator = (indicator) => {
        if (!indicators.includes(indicator)) {
            setIndicators([...indicators, indicator]);
        }
    };
    
    // Remove indicator
    const removeIndicator = (indicator) => {
        setIndicators(indicators.filter(i => i !== indicator));
    };
    
    // Handle timeframe change
    const handleTimeframeChange = (tf) => {
        setTimeframe(tf);
    };
    
    // Handle chart type change
    const handleChartTypeChange = (type) => {
        setChartType(type);
    };
    
    // Handle indicator toggle
    const handleIndicatorToggle = (indicator) => {
        if (indicators.includes(indicator)) {
            removeIndicator(indicator);
        } else {
            addIndicator(indicator);
        }
    };
    
    // Map indicators to TradingView format
    const getTradingViewIndicators = () => {
        const indicatorMap = {
            'MA': 'Moving Average',
            'EMA': 'Moving Average Exponential',
            'MACD': 'MACD',
            'RSI': 'RSI',
            'BB': 'Bollinger Bands',
            'Stoch': 'Stochastic'
        };
        
        return indicators.map(ind => indicatorMap[ind] || ind);
    };
    
    return (
        <div className="flex flex-col h-[calc(100vh-48px)] bg-gray-900">
            {/* Chart Header */}
            <div className="flex flex-col md:flex-row justify-between items-start md:items-center p-4 border-b border-gray-800 bg-gray-900">
                <div className="flex items-center gap-4 mb-3 md:mb-0">
                    <button
                        onClick={() => setView('quotes')}
                        className="flex items-center gap-2 px-3 py-2 hover:bg-gray-800 rounded-lg transition-colors"
                        title="Back to Quotes"
                    >
                        <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M10 19l-7-7m0 0l7-7m-7 7h18" />
                        </svg>
                        <span className="hidden sm:inline">Back</span>
                    </button>
                    <div className="flex items-center gap-3">
                        <div className="w-10 h-10 bg-gradient-to-br from-blue-500 to-purple-600 rounded-lg flex items-center justify-center">
                            <span className="text-white font-bold text-sm">
                                {selectedSymbol.split('/')[0]?.slice(0, 3) || 'BTC'}
                            </span>
                        </div>
                        <div>
                            <h2 className="text-xl font-bold text-white">{selectedSymbol}</h2>
                            <div className="text-sm text-gray-400 flex items-center gap-2">
                                <span className="flex items-center">
                                    <span className="w-2 h-2 bg-green-500 rounded-full mr-1"></span>
                                    Live
                                </span>
                                <span>â€¢</span>
                                <span>Real-time Chart</span>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div className="flex flex-wrap items-center gap-3">
                    {/* Timeframe Selector */}
                    <div className="inline-flex bg-gray-800 rounded-lg p-1">
                        {['1m', '5m', '15m', '1H', '4H', '1D', '1W'].map(tf => (
                            <button
                                key={tf}
                                onClick={() => handleTimeframeChange(tf)}
                                className={`px-3 py-1.5 rounded text-sm font-medium transition-colors ${
                                    timeframe === tf 
                                    ? 'bg-blue-600 text-white' 
                                    : 'text-gray-300 hover:bg-gray-700 hover:text-white'
                                }`}
                            >
                                {tf}
                            </button>
                        ))}
                    </div>
                    
                    {/* Chart Type */}
                    <div className="inline-flex bg-gray-800 rounded-lg p-1">
                        <button
                            onClick={() => handleChartTypeChange('candles')}
                            className={`px-3 py-1.5 rounded text-sm font-medium transition-colors ${
                                chartType === 'candles' 
                                ? 'bg-blue-600 text-white' 
                                : 'text-gray-300 hover:bg-gray-700 hover:text-white'
                            }`}
                        >
                            <span className="flex items-center gap-1">
                                <svg className="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z" />
                                </svg>
                                Candles
                            </span>
                        </button>
                        <button
                            onClick={() => handleChartTypeChange('line')}
                            className={`px-3 py-1.5 rounded text-sm font-medium transition-colors ${
                                chartType === 'line' 
                                ? 'bg-blue-600 text-white' 
                                : 'text-gray-300 hover:bg-gray-700 hover:text-white'
                            }`}
                        >
                            <span className="flex items-center gap-1">
                                <svg className="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M7 12l3-3 3 3 4-4M8 21l4-4 4 4M3 4h18M4 4h16v12a1 1 0 01-1 1H5a1 1 0 01-1-1V4z" />
                                </svg>
                                Line
                            </span>
                        </button>
                    </div>
                    
                    {/* Buy/Sell Buttons */}
                    <div className="flex gap-2">
                        <button
                            onClick={() => {
                                setView('order');
                            }}
                            className="flex items-center gap-2 px-4 py-2.5 bg-red-600 hover:bg-red-700 rounded-lg font-bold text-white transition-colors shadow-lg"
                        >
                            <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M20 12H4" />
                            </svg>
                            Sell
                        </button>
                        <button
                            onClick={() => {
                                setView('order');
                            }}
                            className="flex items-center gap-2 px-4 py-2.5 bg-green-600 hover:bg-green-700 rounded-lg font-bold text-white transition-colors shadow-lg"
                        >
                            <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 4v16m8-8H4" />
                            </svg>
                            Buy
                        </button>
                    </div>
                </div>
            </div>
            
            {/* Chart Container */}
            <div className="flex-1 relative min-h-[400px]">
                {!isTradingViewLoaded ? (
                    <div className="absolute inset-0 flex items-center justify-center bg-gray-900">
                        <div className="text-center">
                            <div className="inline-block animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500 mb-4"></div>
                            <h3 className="text-lg font-semibold text-white mb-2">Loading Chart...</h3>
                            <p className="text-gray-400">Initializing TradingView</p>
                        </div>
                    </div>
                ) : (
                    <div ref={containerRef} className="absolute inset-0">
                        {/* TradingView widget will be inserted here */}
                    </div>
                )}
            </div>
            
            {/* Indicators Panel */}
            <div className="p-4 border-t border-gray-800 bg-gray-900">
                <div className="flex items-center justify-between mb-4">
                    <div>
                        <h3 className="font-bold text-white text-lg">Technical Indicators</h3>
                        <p className="text-sm text-gray-400">Add indicators to your chart</p>
                    </div>
                    <div className="text-sm">
                        <span className="text-gray-300">{indicators.length}</span>
                        <span className="text-gray-400 ml-1">active indicator{indicators.length !== 1 ? 's' : ''}</span>
                    </div>
                </div>
                
                <div className="flex flex-wrap gap-2">
                    {[
                        { id: 'MA', name: 'Moving Average', color: 'bg-purple-500' },
                        { id: 'EMA', name: 'EMA', color: 'bg-blue-500' },
                        { id: 'MACD', name: 'MACD', color: 'bg-yellow-500' },
                        { id: 'RSI', name: 'RSI', color: 'bg-green-500' },
                        { id: 'BB', name: 'Bollinger Bands', color: 'bg-pink-500' },
                        { id: 'Stoch', name: 'Stochastic', color: 'bg-indigo-500' },
                    ].map(indicator => {
                        const isActive = indicators.includes(indicator.id);
                        return (
                            <button
                                key={indicator.id}
                                onClick={() => handleIndicatorToggle(indicator.id)}
                                className={`flex items-center gap-2 px-4 py-2.5 rounded-lg font-medium transition-all ${
                                    isActive 
                                    ? 'bg-gray-800 text-white border-2 border-blue-500' 
                                    : 'bg-gray-800/50 text-gray-300 hover:bg-gray-800 hover:text-white'
                                }`}
                            >
                                <span className={`w-3 h-3 rounded-full ${indicator.color}`}></span>
                                <span>{indicator.name}</span>
                                <span className={`ml-1 ${isActive ? 'text-green-400' : 'text-gray-500'}`}>
                                    {isActive ? 'âœ“' : '+'}
                                </span>
                            </button>
                        );
                    })}
                    
                    {indicators.length > 0 && (
                        <button
                            onClick={() => setIndicators([])}
                            className="flex items-center gap-2 px-4 py-2.5 bg-gray-800 hover:bg-gray-700 text-gray-300 hover:text-white rounded-lg font-medium transition-colors"
                        >
                            <svg className="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16" />
                            </svg>
                            Clear All
                        </button>
                    )}
                </div>
            </div>
        </div>
    );
};

                        
            
            // Order Ticket
            const OrderTicket = () => {
                const [orderType, setOrderType] = useState('Market');
                const [volume, setVolume] = useState(0.01);
                const [stopLoss, setStopLoss] = useState('');
                const [takeProfit, setTakeProfit] = useState('');
                const [comment, setComment] = useState('');
                
                const currentQuote = quotes.find(q => q.symbol === selectedSymbol);
                
                const calculateMargin = () => {
                    return volume * 1000; // Simplified margin calculation
                };
                
                const handleSubmit = (type) => {
                    startTrade(selectedSymbol, volume, type);
                };
                
                return (
                    <div className="min-h-screen pb-20">
                        <div className="p-4">
                            <div className="flex items-center gap-3 mb-6">
                                <button
                                    onClick={() => setView('quotes')}
                                    className="p-2 hover:bg-gray-800 rounded-lg"
                                >
                                    <Icon name="arrowUp" className="w-5 h-5 rotate-180" />
                                </button>
                                <div>
                                    <h2 className="text-xl font-bold">New Order</h2>
                                    <div className="text-gray-400">{selectedSymbol}</div>
                                </div>
                            </div>
                            
                            <div className="grid grid-cols-1 lg:grid-cols-3 gap-6">
                                {/* Order Details */}
                                <div className="lg:col-span-2 space-y-4">
                                    {/* Symbol Info */}
                                    <div className="bg-gray-900 rounded-lg border border-gray-700 p-4">
                                        <div className="flex justify-between items-center mb-4">
                                            <div className="text-2xl font-bold">{selectedSymbol}</div>
                                            <div className="text-right">
                                                <div className="text-sm text-gray-400">Current Price</div>
                                                <div className="text-2xl font-bold mono text-green-400">
                                                    {currentQuote ? formatCurrency(currentQuote.price) : 'Loading...'}
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <div className="grid grid-cols-2 gap-4 text-sm">
                                            <div>
                                                <div className="text-gray-400">Bid</div>
                                                <div className="font-medium mono">{currentQuote ? formatNumber(currentQuote.price * 0.999, 4) : '--'}</div>
                                            </div>
                                            <div>
                                                <div className="text-gray-400">Ask</div>
                                                <div className="font-medium mono">{currentQuote ? formatNumber(currentQuote.price * 1.001, 4) : '--'}</div>
                                            </div>
                                            <div>
                                                <div className="text-gray-400">Spread</div>
                                                <div className="font-medium mono">2.0 pips</div>
                                            </div>
                                            <div>
                                                <div className="text-gray-400">Daily Change</div>
                                                <div className={`font-medium ${currentQuote?.change >= 0 ? 'text-green-400' : 'text-red-400'}`}>
                                                    {currentQuote?.change?.toFixed(2)}%
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    {/* Order Type */}
                                    <div className="bg-gray-900 rounded-lg border border-gray-700 p-4">
                                        <label className="block text-sm font-medium text-gray-300 mb-2">Order Type</label>
                                        <div className="grid grid-cols-3 gap-2">
                                            {['Market', 'Limit', 'Stop'].map(type => (
                                                <button
                                                    key={type}
                                                    onClick={() => setOrderType(type)}
                                                    className={`py-2 rounded-lg ${orderType === type ? 'bg-blue-600' : 'bg-gray-800 hover:bg-gray-700'}`}
                                                >
                                                    {type}
                                                </button>
                                            ))}
                                        </div>
                                    </div>
                                    
                                    {/* Volume */}
                                    <div className="bg-gray-900 rounded-lg border border-gray-700 p-4">
                                        <div className="flex justify-between items-center mb-2">
                                            <label className="block text-sm font-medium text-gray-300">Volume (Lots)</label>
                                            <span className="text-sm text-gray-400">Max: 50 lots</span>
                                        </div>
                                        <div className="flex items-center justify-between mb-4">
                                            <button
                                                onClick={() => setVolume(Math.max(0.01, volume - 0.01))}
                                                className="w-12 h-12 text-2xl hover:bg-gray-800 rounded-lg"
                                            >
                                                -
                                            </button>
                                            <input
                                                type="number"
                                                step="0.01"
                                                min="0.01"
                                                max="50"
                                                className="w-32 text-center text-3xl font-bold bg-transparent border-none outline-none"
                                                value={volume}
                                                onChange={(e) => setVolume(Math.max(0.01, Math.min(50, parseFloat(e.target.value) || 0.01)))}
                                            />
                                            <button
                                                onClick={() => setVolume(Math.min(50, volume + 0.01))}
                                                className="w-12 h-12 text-2xl hover:bg-gray-800 rounded-lg"
                                            >
                                                +
                                            </button>
                                        </div>
                                        <div className="flex gap-2">
                                            {[0.01, 0.1, 0.5, 1, 5].map(val => (
                                                <button
                                                    key={val}
                                                    onClick={() => setVolume(val)}
                                                    className={`flex-1 py-2 rounded text-sm ${volume === val ? 'bg-blue-600' : 'bg-gray-800 hover:bg-gray-700'}`}
                                                >
                                                    {val}
                                                </button>
                                            ))}
                                        </div>
                                    </div>
                                    
                                    {/* Stop Loss & Take Profit */}
                                    <div className="grid grid-cols-2 gap-4">
                                        <div className="bg-gray-900 rounded-lg border border-gray-700 p-4">
                                            <label className="block text-sm font-medium text-gray-300 mb-2">Stop Loss</label>
                                            <input
                                                type="number"
                                                placeholder="0.00"
                                                className="w-full px-3 py-2 bg-gray-800 border border-gray-700 rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                                value={stopLoss}
                                                onChange={(e) => setStopLoss(e.target.value)}
                                            />
                                        </div>
                                        <div className="bg-gray-900 rounded-lg border border-gray-700 p-4">
                                            <label className="block text-sm font-medium text-gray-300 mb-2">Take Profit</label>
                                            <input
                                                type="number"
                                                placeholder="0.00"
                                                className="w-full px-3 py-2 bg-gray-800 border border-gray-700 rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                                value={takeProfit}
                                                onChange={(e) => setTakeProfit(e.target.value)}
                                            />
                                        </div>
                                    </div>
                                    
                                    {/* Comment */}
                                    <div className="bg-gray-900 rounded-lg border border-gray-700 p-4">
                                        <label className="block text-sm font-medium text-gray-300 mb-2">Comment (Optional)</label>
                                        <input
                                            type="text"
                                            placeholder="Trade note..."
                                            className="w-full px-3 py-2 bg-gray-800 border border-gray-700 rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                            value={comment}
                                            onChange={(e) => setComment(e.target.value)}
                                        />
                                    </div>
                                </div>
                                
                                {/* Order Summary & Execution */}
                                <div className="space-y-4">
                                    {/* Order Summary */}
                                    <div className="bg-gray-900 rounded-lg border border-gray-700 p-4">
                                        <h3 className="font-bold mb-4">Order Summary</h3>
                                        <div className="space-y-3">
                                            <div className="flex justify-between">
                                                <span className="text-gray-400">Symbol</span>
                                                <span className="font-medium">{selectedSymbol}</span>
                                            </div>
                                            <div className="flex justify-between">
                                                <span className="text-gray-400">Order Type</span>
                                                <span className="font-medium">{orderType}</span>
                                            </div>
                                            <div className="flex justify-between">
                                                <span className="text-gray-400">Volume</span>
                                                <span className="font-medium mono">{volume} lots</span>
                                            </div>
                                            <div className="flex justify-between">
                                                <span className="text-gray-400">Margin Required</span>
                                                <span className="font-medium mono text-yellow-400">{formatCurrency(calculateMargin())}</span>
                                            </div>
                                            <div className="flex justify-between">
                                                <span className="text-gray-400">Available Margin</span>
                                                <span className="font-medium mono">{formatCurrency(freeMargin)}</span>
                                            </div>
                                            <div className={`flex justify-between ${freeMargin >= calculateMargin() ? 'text-green-400' : 'text-red-400'}`}>
                                                <span>Margin Status</span>
                                                <span className="font-bold">
                                                    {freeMargin >= calculateMargin() ? 'Sufficient' : 'Insufficient'}
                                                </span>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    {/* Execution Buttons */}
                                    <div className="space-y-3">
                                        <button
                                            onClick={() => handleSubmit('sell')}
                                            className="w-full py-4 bg-red-600 hover:bg-red-700 rounded-lg font-bold text-lg"
                                            disabled={freeMargin < calculateMargin()}
                                        >
                                            SELL {selectedSymbol}
                                        </button>
                                        <button
                                            onClick={() => handleSubmit('buy')}
                                            className="w-full py-4 bg-green-600 hover:bg-green-700 rounded-lg font-bold text-lg"
                                            disabled={freeMargin < calculateMargin()}
                                        >
                                            BUY {selectedSymbol}
                                        </button>
                                    </div>
                                    
                                    {/* Quick Stats */}
                                    <div className="bg-gray-900 rounded-lg border border-gray-700 p-4">
                                        <h3 className="font-bold mb-3">Account Status</h3>
                                        <div className="space-y-2">
                                            <div className="flex justify-between">
                                                <span className="text-gray-400">Balance</span>
                                                <span className="font-medium mono">{formatCurrency(balance)}</span>
                                            </div>
                                            <div className="flex justify-between">
                                                <span className="text-gray-400">Equity</span>
                                                <span className="font-medium mono">{formatCurrency(equity)}</span>
                                            </div>
                                            <div className="flex justify-between">
                                                <span className="text-gray-400">Free Margin</span>
                                                <span className="font-medium mono">{formatCurrency(freeMargin)}</span>
                                            </div>
                                            <div className="flex justify-between">
                                                <span className="text-gray-400">Margin Level</span>
                                                <span className="font-medium mono">
                                                    {freeMargin > 0 ? ((equity / (equity - freeMargin)) * 100).toFixed(1) + '%' : 'N/A'}
                                                </span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                );
            };
            
            // Trade Page
            const TradePage = () => {
                return (
                    <div className="min-h-screen pb-20">
                        <div className="p-4">
                            <div className="flex items-center justify-between mb-6">
                                <h2 className="text-2xl font-bold">Active Trades</h2>
                                <button
                                    onClick={() => setView('order')}
                                    className="px-4 py-2 bg-gradient-to-r from-blue-600 to-purple-600 rounded-lg font-semibold hover:opacity-90"
                                >
                                    New Order
                                </button>
                            </div>
                            
                            {activeTrades.length === 0 ? (
                                <div className="text-center py-12">
                                    <div className="w-24 h-24 bg-gray-800 rounded-full flex items-center justify-center mx-auto mb-6">
                                        <Icon name="trade" className="w-12 h-12 text-gray-500" />
                                    </div>
                                    <h3 className="text-xl font-bold mb-2">No Active Trades</h3>
                                    <p className="text-gray-400 mb-6">You don't have any open positions yet.</p>
                                    <button
                                        onClick={() => setView('quotes')}
                                        className="px-6 py-3 bg-gradient-to-r from-blue-600 to-purple-600 rounded-lg font-semibold hover:opacity-90"
                                    >
                                        Start Trading
                                    </button>
                                </div>
                            ) : (
                                <div className="space-y-4">
                                    {activeTrades.map(trade => (
                                        <div key={trade.id} className="bg-gray-900 rounded-xl border border-gray-700 p-6">
                                            <div className="flex flex-col md:flex-row justify-between items-start md:items-center mb-4">
                                                <div>
                                                    <div className="flex items-center gap-3 mb-2">
                                                        <span className="text-2xl font-bold">{trade.symbol}</span>
                                                        <span className={`px-3 py-1 rounded-full text-sm font-bold ${trade.type === 'buy' ? 'bg-green-500/20 text-green-400' : 'bg-red-500/20 text-red-400'}`}>
                                                            {trade.type.toUpperCase()}
                                                        </span>
                                                    </div>
                                                    <div className="text-sm text-gray-400">
                                                        Opened: {trade.openTime} â€¢ Volume: {trade.volume} lots
                                                    </div>
                                                </div>
                                                <div className="mt-3 md:mt-0">
                                                    <div className="text-3xl font-bold mono mb-1">
                                                        <span className={trade.currentProfit >= 0 ? 'text-green-400' : 'text-red-400'}>
                                                            {trade.currentProfit >= 0 ? '+' : ''}{formatCurrency(trade.currentProfit || 0)}
                                                        </span>
                                                    </div>
                                                    <div className="text-sm text-gray-400 text-right">
                                                        Current Price: {formatNumber(trade.currentPrice || trade.openPrice, 4)}
                                                    </div>
                                                </div>
                                            </div>
                                            
                                            <div className="grid grid-cols-2 md:grid-cols-4 gap-4 mb-6">
                                                <div>
                                                    <div className="text-sm text-gray-400">Open Price</div>
                                                    <div className="font-medium mono">{formatNumber(trade.openPrice, 4)}</div>
                                                </div>
                                                <div>
                                                    <div className="text-sm text-gray-400">Current Price</div>
                                                    <div className="font-medium mono">{formatNumber(trade.currentPrice || trade.openPrice, 4)}</div>
                                                </div>
                                                <div>
                                                    <div className="text-sm text-gray-400">Swap</div>
                                                    <div className="font-medium mono">{formatCurrency(trade.swap || 0)}</div>
                                                </div>
                                                <div>
                                                    <div className="text-sm text-gray-400">Commission</div>
                                                    <div className="font-medium mono">{formatCurrency(trade.commission || 0)}</div>
                                                </div>
                                            </div>
                                            
                                            <div className="flex gap-3">
                                                <button
                                                    onClick={() => closeTrade(trade.id)}
                                                    className="flex-1 py-3 bg-red-600 hover:bg-red-700 rounded-lg font-semibold"
                                                >
                                                    Close Position
                                                </button>
                                                <button
                                                    onClick={() => {
                                                        setSelectedSymbol(trade.symbol);
                                                        setView('charts');
                                                    }}
                                                    className="flex-1 py-3 bg-gray-800 hover:bg-gray-700 rounded-lg font-semibold border border-gray-700"
                                                >
                                                    View Chart
                                                </button>
                                                <button
                                                    onClick={() => {
                                                        setSelectedSymbol(trade.symbol);
                                                        setView('order');
                                                    }}
                                                    className="flex-1 py-3 bg-blue-600 hover:bg-blue-700 rounded-lg font-semibold"
                                                >
                                                    Modify
                                                </button>
                                            </div>
                                        </div>
                                    ))}
                                </div>
                            )}
                        </div>
                    </div>
                );
            };
            
            // Deposit Page
            const Deposit = () => {
                const [searchAsset, setSearchAsset] = useState('');
                const [showQRScanner, setShowQRScanner] = useState(false);
                const [scannedAddress, setScannedAddress] = useState('');
                
                // Filter assets based on search
                const filteredAssets = assets.filter(asset => 
                    asset.name.toLowerCase().includes(searchAsset.toLowerCase()) ||
                    asset.symbol.toLowerCase().includes(searchAsset.toLowerCase())
                ).sort((a, b) => a.symbol.localeCompare(b.symbol)); // Alphabetical order
                
                // Handle QR code scanning
                const handleQRScan = () => {
                    setShowQRScanner(true);
                    // In a real implementation, you would use the ZXing or html5-qrcode library here
                };
                
                // Copy address to clipboard
                const copyToClipboard = (text) => {
                    navigator.clipboard.writeText(text);
                    setModal({
                        title: "Address Copied",
                        body: "Wallet address has been copied to clipboard."
                    });
                };
                
                // Render based on current step
                const renderStep = () => {
                    switch(depositStep) {
                        case 'select':
                            return (
                                <div>
                                    <div className="mb-6">
                                        <h3 className="text-lg font-bold mb-3">Select Deposit Method</h3>
                                        <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                                            <button
                                                onClick={() => window.open(API_CONFIG.MERCRYO_DEPOSIT, "_blank")}
                                                className="p-4 bg-gray-900 rounded-lg border border-gray-700 hover:border-blue-500 transition-colors text-left"
                                            >
                                                <div className="flex items-center gap-3 mb-3">
                                                    <div className="w-10 h-10 bg-blue-500/20 rounded-lg flex items-center justify-center">
                                                        <Icon name="wallet" className="w-5 h-5 text-blue-400" />
                                                    </div>
                                                    <div>
                                                        <div className="font-bold">Bank Transfer</div>
                                                        <div className="text-sm text-gray-400">Credit/Debit Card, Bank Wire</div>
                                                    </div>
                                                </div>
                                                <div className="text-sm text-gray-400">
                                                    Processed via Mercuryo â€¢ Instant â€¢ Fee: 2.5%
                                                </div>
                                            </button>
                                            
                                            <button
                                                onClick={() => setDepositStep('crypto')}
                                                className="p-4 bg-gray-900 rounded-lg border border-gray-700 hover:border-blue-500 transition-colors text-left"
                                            >
                                                <div className="flex items-center gap-3 mb-3">
                                                    <div className="w-10 h-10 bg-green-500/20 rounded-lg flex items-center justify-center">
                                                        <Icon name="qrcode" className="w-5 h-5 text-green-400" />
                                                    </div>
                                                    <div>
                                                        <div className="font-bold">Crypto Deposit</div>
                                                        <div className="text-sm text-gray-400">Bitcoin, Ethereum, USDT, etc.</div>
                                                    </div>
                                                </div>
                                                <div className="text-sm text-gray-400">
                                                    Direct wallet transfer â€¢ 1-3 confirmations â€¢ Network fees apply
                                                </div>
                                            </button>
                                        </div>
                                    </div>
                                    
                                    <button
                                        onClick={() => setView('dashboard')}
                                        className="w-full py-3 bg-gray-800 hover:bg-gray-700 rounded-lg font-semibold border border-gray-700"
                                    >
                                        Return to Dashboard
                                    </button>
                                </div>
                            );
                            
                        case 'crypto':
                            return (
                                <div>
                                    <div className="mb-6">
                                        <div className="flex items-center gap-3 mb-4">
                                            <button
                                                onClick={() => setDepositStep('select')}
                                                className="p-2 hover:bg-gray-800 rounded-lg"
                                            >
                                                <Icon name="arrowUp" className="w-5 h-5 rotate-180" />
                                            </button>
                                            <h3 className="text-lg font-bold">Select Crypto Asset</h3>
                                        </div>
                                        
                                        {/* Search Bar */}
                                        <div className="relative mb-4">
                                            <Icon name="search" className="absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-500" />
                                            <input
                                                type="text"
                                                placeholder="Search assets (BTC, ETH, USDT...)"
                                                className="w-full pl-10 pr-4 py-3 bg-gray-800 border border-gray-700 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                                value={searchAsset}
                                                onChange={(e) => setSearchAsset(e.target.value)}
                                            />
                                        </div>
                                        
                                        {/* Assets Grid */}
                                        <div className="grid grid-cols-2 md:grid-cols-4 gap-3 max-h-[50vh] overflow-y-auto p-1">
                                            {filteredAssets.slice(0, 20).map(asset => (
                                                <button
                                                    key={asset.id}
                                                    onClick={() => {
                                                        setSelectedAsset(asset);
                                                        setDepositStep('network');
                                                    }}
                                                    className="p-3 bg-gray-900 hover:bg-gray-800 rounded-lg border border-gray-700 transition-colors text-left"
                                                >
                                                    <div className="flex items-center gap-3 mb-2">
                                                        <img src={asset.image} alt={asset.name} className="w-8 h-8 rounded-full" />
                                                        <div>
                                                            <div className="font-bold text-sm">{asset.symbol.toUpperCase()}</div>
                                                            <div className="text-xs text-gray-400 truncate">{asset.name}</div>
                                                        </div>
                                                    </div>
                                                    <div className="text-xs mono">${asset.current_price?.toLocaleString()}</div>
                                                </button>
                                            ))}
                                        </div>
                                    </div>
                                </div>
                            );
                            
                        case 'network':
                            return (
                                <div>
                                    <div className="mb-6">
                                        <div className="flex items-center gap-3 mb-6">
                                            <button
                                                onClick={() => setDepositStep('crypto')}
                                                className="p-2 hover:bg-gray-800 rounded-lg"
                                            >
                                                <Icon name="arrowUp" className="w-5 h-5 rotate-180" />
                                            </button>
                                            <div>
                                                <h3 className="text-lg font-bold">Select Network</h3>
                                                <div className="text-sm text-gray-400">Deposit {selectedAsset?.symbol.toUpperCase()}</div>
                                            </div>
                                        </div>
                                        
                                        <div className="space-y-3">
                                            {SUPPORTED_NETWORKS.map(network => (
                                                <button
                                                    key={network.id}
                                                    onClick={() => {
                                                        setSelectedNetwork(network);
                                                        setDepositStep('address');
                                                    }}
                                                    className="w-full p-4 bg-gray-900 hover:bg-gray-800 rounded-lg border border-gray-700 transition-colors text-left"
                                                >
                                                    <div className="flex items-center justify-between">
                                                        <div className="flex items-center gap-3">
                                                            <div className="w-10 h-10 bg-blue-500/20 rounded-lg flex items-center justify-center">
                                                                <span className="font-bold text-sm">{network.symbol}</span>
                                                            </div>
                                                            <div>
                                                                <div className="font-bold">{network.name}</div>
                                                                <div className="text-sm text-gray-400">{network.type}</div>
                                                            </div>
                                                        </div>
                                                        <Icon name="arrowUp" className="w-5 h-5 rotate-90 text-gray-400" />
                                                    </div>
                                                </button>
                                            ))}
                                        </div>
                                    </div>
                                </div>
                            );
                            
                        case 'address':
                            return (
                                <div>
                                    <div className="mb-6">
                                        <div className="flex items-center gap-3 mb-6">
                                            <button
                                                onClick={() => setDepositStep('network')}
                                                className="p-2 hover:bg-gray-800 rounded-lg"
                                            >
                                                <Icon name="arrowUp" className="w-5 h-5 rotate-180" />
                                            </button>
                                            <div>
                                                <h3 className="text-lg font-bold">Deposit Address</h3>
                                                <div className="text-sm text-gray-400">{selectedAsset?.symbol.toUpperCase()} â€¢ {selectedNetwork?.name}</div>
                                            </div>
                                        </div>
                                        
                                        {/* QR Code */}
                                        <div className="bg-gray-900 rounded-xl p-6 mb-6 border border-gray-700">
                                            <div className="flex flex-col items-center">
                                                <div id="qrcode" className="mb-4"></div>
                                                <div className="text-center mb-4">
                                                    <div className="text-sm text-gray-400 mb-1">Scan QR Code or Copy Address</div>
                                                    <div className="font-mono text-sm bg-gray-800 p-3 rounded-lg break-all">
                                                        {selectedNetwork?.wallet || 'Address not available'}
                                                    </div>
                                                </div>
                                                
                                                <div className="flex gap-3">
                                                    <button
                                                        onClick={() => copyToClipboard(selectedNetwork?.wallet || '')}
                                                        className="px-4 py-2 bg-blue-600 hover:bg-blue-700 rounded-lg font-medium flex items-center gap-2"
                                                    >
                                                        <Icon name="copy" className="w-4 h-4" />
                                                        Copy Address
                                                    </button>
                                                    <button
                                                        onClick={handleQRScan}
                                                        className="px-4 py-2 bg-gray-800 hover:bg-gray-700 rounded-lg font-medium border border-gray-700 flex items-center gap-2"
                                                    >
                                                        <Icon name="qrcode" className="w-4 h-4" />
                                                        Scan QR
                                                    </button>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        {/* Deposit Amount */}
                                        <div className="bg-gray-900 rounded-lg border border-gray-700 p-4 mb-6">
                                            <label className="block text-sm font-medium text-gray-300 mb-2">
                                                Deposit Amount ({selectedAsset?.symbol.toUpperCase()})
                                            </label>
                                            <input
                                                type="number"
                                                placeholder="Enter amount"
                                                className="w-full px-4 py-3 bg-gray-800 border border-gray-700 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-lg"
                                                value={depositAmount}
                                                onChange={(e) => setDepositAmount(e.target.value)}
                                            />
                                            <div className="text-sm text-gray-400 mt-2">
                                                Minimum deposit: 10 {selectedAsset?.symbol.toUpperCase()}
                                            </div>
                                        </div>
                                        
                                        {/* QR Scanner (Conditional) */}
                                        {showQRScanner && (
                                            <div className="mb-6">
                                                <div className="flex items-center justify-between mb-3">
                                                    <div className="text-sm font-medium">QR Code Scanner</div>
                                                    <button
                                                        onClick={() => setShowQRScanner(false)}
                                                        className="text-gray-400 hover:text-gray-300"
                                                    >
                                                        <Icon name="close" className="w-5 h-5" />
                                                    </button>
                                                </div>
                                                <div className="bg-black rounded-lg overflow-hidden">
                                                    <div id="reader" className="w-full h-64"></div>
                                                </div>
                                            </div>
                                        )}
                                        
                                        <button
                                            onClick={() => setDepositStep('validate')}
                                            className="w-full py-3 bg-gradient-to-r from-blue-600 to-purple-600 rounded-lg font-semibold hover:opacity-90"
                                            disabled={!depositAmount || parseFloat(depositAmount) < 10}
                                        >
                                            Continue to Validation
                                        </button>
                                    </div>
                                </div>
                            );
                            
                        case 'validate':
                            return (
                                <div>
                                    <div className="mb-6">
                                        <div className="flex items-center gap-3 mb-6">
                                            <button
                                                onClick={() => setDepositStep('address')}
                                                className="p-2 hover:bg-gray-800 rounded-lg"
                                            >
                                                <Icon name="arrowUp" className="w-5 h-5 rotate-180" />
                                            </button>
                                            <div>
                                                <h3 className="text-lg font-bold">Validate Deposit</h3>
                                                <div className="text-sm text-gray-400">Enter validation code sent to your email</div>
                                            </div>
                                        </div>
                                        
                                        <div className="bg-gray-900 rounded-xl p-6 mb-6 border border-gray-700">
                                            <div className="text-center mb-6">
                                                <div className="w-16 h-16 bg-blue-500/20 rounded-full flex items-center justify-center mx-auto mb-4">
                                                    <Icon name="check" className="w-8 h-8 text-blue-400" />
                                                </div>
                                                <h4 className="text-xl font-bold mb-2">Almost There!</h4>
                                                <p className="text-gray-400">
                                                    Enter the 6-digit validation code to complete your deposit of<br />
                                                    <span className="font-bold text-white">{depositAmount} {selectedAsset?.symbol.toUpperCase()}</span>
                                                </p>
                                            </div>
                                            
                                            {validationError && (
                                                <div className="bg-red-500/20 border border-red-500/30 rounded-lg p-3 mb-4">
                                                    <div className="text-red-400 text-sm">{validationError}</div>
                                                </div>
                                            )}
                                            
                                            <div className="mb-6">
                                                <label className="block text-sm font-medium text-gray-300 mb-2">
                                                    Validation Code
                                                </label>
                                                <input
                                                    type="text"
                                                    placeholder="Enter 6-digit code"
                                                    maxLength="6"
                                                    className="w-full px-4 py-3 bg-gray-800 border border-gray-700 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-center text-2xl font-mono"
                                                    value={depositCode}
                                                    onChange={(e) => {
                                                        setDepositCode(e.target.value.replace(/\D/g, '').slice(0, 6));
                                                        setValidationError('');
                                                    }}
                                                />
                                                <div className="text-sm text-gray-400 mt-2 text-center">
                                                    Check your email for the validation code
                                                </div>
                                            </div>
                                            
                                            <button
                                                onClick={handleDeposit}
                                                className="w-full py-3 bg-gradient-to-r from-green-600 to-emerald-600 rounded-lg font-semibold hover:opacity-90"
                                            >
                                                Confirm Deposit
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            );
                            
                        default:
                            return null;
                    }
                };
                
                return (
                    <div className="min-h-screen pb-20">
                        <div className="p-4">
                            <div className="max-w-2xl mx-auto">
                                <div className="mb-8">
                                    <h2 className="text-2xl font-bold mb-2">Deposit Funds</h2>
                                    <p className="text-gray-400">Add funds to your trading account</p>
                                </div>
                                
                                {renderStep()}
                                
                                {/* Progress Steps */}
                                {depositStep !== 'select' && depositStep !== 'validate' && (
                                    <div className="mt-8">
                                        <div className="flex items-center justify-between mb-4">
                                            <div className={`text-sm font-medium ${depositStep === 'crypto' ? 'text-blue-400' : 'text-gray-400'}`}>
                                                Select Asset
                                            </div>
                                            <div className={`text-sm font-medium ${depositStep === 'network' ? 'text-blue-400' : 'text-gray-400'}`}>
                                                Select Network
                                            </div>
                                            <div className={`text-sm font-medium ${depositStep === 'address' ? 'text-blue-400' : 'text-gray-400'}`}>
                                                Deposit Address
                                            </div>
                                        </div>
                                        <div className="flex items-center">
                                            <div className={`h-1 flex-1 ${depositStep === 'crypto' ? 'bg-blue-500' : 'bg-gray-700'}`}></div>
                                            <div className={`w-6 h-6 rounded-full flex items-center justify-center ${depositStep === 'crypto' ? 'bg-blue-500' : 'bg-gray-700'}`}>
                                                {depositStep === 'crypto' && <Icon name="check" className="w-3 h-3" />}
                                            </div>
                                            <div className={`h-1 flex-1 ${depositStep === 'network' ? 'bg-blue-500' : 'bg-gray-700'}`}></div>
                                            <div className={`w-6 h-6 rounded-full flex items-center justify-center ${depositStep === 'network' ? 'bg-blue-500' : 'bg-gray-700'}`}>
                                                {depositStep === 'network' && <Icon name="check" className="w-3 h-3" />}
                                            </div>
                                            <div className={`h-1 flex-1 ${depositStep === 'address' ? 'bg-blue-500' : 'bg-gray-700'}`}></div>
                                            <div className={`w-6 h-6 rounded-full flex items-center justify-center ${depositStep === 'address' ? 'bg-blue-500' : 'bg-gray-700'}`}>
                                                {depositStep === 'address' && <Icon name="check" className="w-3 h-3" />}
                                            </div>
                                        </div>
                                    </div>
                                )}
                            </div>
                        </div>
                    </div>
                );
            };
            
            // History Page
            const History = () => {
                const [filterType, setFilterType] = useState('all');
                
                const filteredHistory = history.filter(record => {
                    if (filterType === 'all') return true;
                    return record.type.toLowerCase().includes(filterType.toLowerCase());
                });
                
                return (
                    <div className="min-h-screen pb-20">
                        <div className="p-4">
                            <div className="flex items-center justify-between mb-6">
                                <h2 className="text-2xl font-bold">History</h2>
                                <div className="flex gap-2">
                                    {['all', 'deposit', 'withdraw', 'trade'].map(type => (
                                        <button
                                            key={type}
                                            onClick={() => setFilterType(type)}
                                            className={`px-3 py-1.5 rounded-lg text-sm capitalize ${filterType === type ? 'bg-blue-600' : 'bg-gray-800 hover:bg-gray-700'}`}
                                        >
                                            {type}
                                        </button>
                                    ))}
                                </div>
                            </div>
                            
                            {filteredHistory.length === 0 ? (
                                <div className="text-center py-12">
                                    <div className="w-24 h-24 bg-gray-800 rounded-full flex items-center justify-center mx-auto mb-6">
                                        <Icon name="history" className="w-12 h-12 text-gray-500" />
                                    </div>
                                    <h3 className="text-xl font-bold mb-2">No History Found</h3>
                                    <p className="text-gray-400 mb-6">
                                        {filterType === 'all' 
                                            ? "You don't have any transaction history yet." 
                                            : `No ${filterType} history found.`}
                                    </p>
                                    {filterType !== 'all' && (
                                        <button
                                            onClick={() => setFilterType('all')}
                                            className="px-6 py-3 bg-gray-800 hover:bg-gray-700 rounded-lg font-semibold border border-gray-700"
                                        >
                                            View All History
                                        </button>
                                    )}
                                </div>
                            ) : (
                                <div className="space-y-4">
                                    {filteredHistory.map(record => (
                                        <div key={record.id} className="bg-gray-900 rounded-xl border border-gray-700 p-4">
                                            <div className="flex justify-between items-start mb-3">
                                                <div>
                                                    <div className="flex items-center gap-2 mb-1">
                                                        <span className="font-bold">{record.type}</span>
                                                        {record.symbol && (
                                                            <span className="text-sm bg-gray-800 px-2 py-1 rounded">
                                                                {record.symbol}
                                                            </span>
                                                        )}
                                                    </div>
                                                    <div className="text-sm text-gray-400">
                                                        {record.date}
                                                        {record.status && (
                                                            <span className={`ml-2 ${record.status === 'Completed' ? 'text-green-400' : 'text-yellow-400'}`}>
                                                                â€¢ {record.status}
                                                            </span>
                                                        )}
                                                    </div>
                                                </div>
                                                <div className="text-right">
                                                    <div className={`text-lg font-bold mono ${record.type === 'Deposit' ? 'text-green-400' : record.type === 'Withdraw' ? 'text-red-400' : 'text-blue-400'}`}>
                                                        {record.type.includes('Trade') ? '' : (record.type === 'Deposit' ? '+' : '-')}
                                                        {record.amount ? formatCurrency(record.amount) : ''}
                                                        {record.profit && (
                                                            <span className={record.profit >= 0 ? 'text-green-400' : 'text-red-400'}>
                                                                {record.profit >= 0 ? '+' : ''}{formatCurrency(record.profit)}
                                                            </span>
                                                        )}
                                                    </div>
                                                    {record.asset && (
                                                        <div className="text-sm text-gray-400">
                                                            {record.asset}
                                                            {record.network && ` â€¢ ${record.network}`}
                                                        </div>
                                                    )}
                                                </div>
                                            </div>
                                            
                                            {record.comment && (
                                                <div className="text-sm text-gray-400 border-t border-gray-800 pt-3 mt-3">
                                                    {record.comment}
                                                </div>
                                            )}
                                        </div>
                                    ))}
                                </div>
                            )}
                        </div>
                    </div>
                );
            };
            
            // Settings Page
            const Settings = () => {
                const [settings, setSettings] = useState({
                    notifications: true,
                    sound: true,
                    darkMode: true,
                    leverage: 100,
                    language: 'English',
                    timezone: 'UTC',
                    twoFactor: false
                });
                
                const handleSettingChange = (key, value) => {
                    setSettings({...settings, [key]: value});
                };
                
                return (
                    <div className="min-h-screen pb-20">
                        <div className="p-4">
                            <div className="mb-8">
                                <h2 className="text-2xl font-bold mb-2">Settings</h2>
                                <p className="text-gray-400">Manage your account preferences</p>
                            </div>
                            
                            <div className="space-y-6">
                                {/* Account Info */}
                                <div className="bg-gray-900 rounded-xl border border-gray-700 p-6">
                                    <h3 className="text-lg font-bold mb-4">Account Information</h3>
                                    <div className="space-y-4">
                                        <div>
                                            <div className="text-sm text-gray-400 mb-1">Account ID</div>
                                            <div className="font-mono text-lg">{user?.accountID}</div>
                                        </div>
                                        <div>
                                            <div className="text-sm text-gray-400 mb-1">Account Type</div>
                                            <div className="font-medium">{user?.type} Account</div>
                                        </div>
                                        <div>
                                            <div className="text-sm text-gray-400 mb-1">Email</div>
                                            <div className="font-medium">{user?.email}</div>
                                        </div>
                                        <div>
                                            <div className="text-sm text-gray-400 mb-1">Registration Date</div>
                                            <div className="font-medium">{new Date().toLocaleDateString()}</div>
                                        </div>
                                    </div>
                                </div>
                                
                                {/* Trading Settings */}
                                <div className="bg-gray-900 rounded-xl border border-gray-700 p-6">
                                    <h3 className="text-lg font-bold mb-4">Trading Settings</h3>
                                    <div className="space-y-4">
                                        <div>
                                            <div className="flex justify-between items-center mb-2">
                                                <div>
                                                    <div className="font-medium">Leverage</div>
                                                    <div className="text-sm text-gray-400">Adjust your account leverage</div>
                                                </div>
                                                <select
                                                    className="px-3 py-2 bg-gray-800 border border-gray-700 rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                                    value={settings.leverage}
                                                    onChange={(e) => handleSettingChange('leverage', e.target.value)}
                                                >
                                                    <option value={50}>1:50</option>
                                                    <option value={100}>1:100</option>
                                                    <option value={200}>1:200</option>
                                                    <option value={500}>1:500</option>
                                                </select>
                                            </div>
                                        </div>
                                        
                                        <div>
                                            <div className="flex justify-between items-center mb-2">
                                                <div>
                                                    <div className="font-medium">Timezone</div>
                                                    <div className="text-sm text-gray-400">Set your local timezone</div>
                                                </div>
                                                <select
                                                    className="px-3 py-2 bg-gray-800 border border-gray-700 rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                                    value={settings.timezone}
                                                    onChange={(e) => handleSettingChange('timezone', e.target.value)}
                                                >
                                                    <option value="UTC">UTC</option>
                                                    <option value="EST">EST</option>
                                                    <option value="PST">PST</option>
                                                    <option value="GMT">GMT</option>
                                                </select>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                {/* Notification Settings */}
                                <div className="bg-gray-900 rounded-xl border border-gray-700 p-6">
                                    <h3 className="text-lg font-bold mb-4">Notifications</h3>
                                    <div className="space-y-4">
                                        {[
                                            { key: 'notifications', label: 'Push Notifications', description: 'Receive trade alerts and updates' },
                                            { key: 'sound', label: 'Sound Alerts', description: 'Play sounds for trade events' },
                                            { key: 'twoFactor', label: 'Two-Factor Authentication', description: 'Extra security for your account' }
                                        ].map(setting => (
                                            <div key={setting.key} className="flex justify-between items-center">
                                                <div>
                                                    <div className="font-medium">{setting.label}</div>
                                                    <div className="text-sm text-gray-400">{setting.description}</div>
                                                </div>
                                                <button
                                                    onClick={() => handleSettingChange(setting.key, !settings[setting.key])}
                                                    className={`w-12 h-6 rounded-full transition-colors ${settings[setting.key] ? 'bg-blue-600' : 'bg-gray-700'}`}
                                                >
                                                    <div className={`w-5 h-5 rounded-full bg-white transform transition-transform ${settings[setting.key] ? 'translate-x-7' : 'translate-x-1'}`}></div>
                                                </button>
                                            </div>
                                        ))}
                                    </div>
                                </div>
                                
                                {/* Language */}
                                <div className="bg-gray-900 rounded-xl border border-gray-700 p-6">
                                    <h3 className="text-lg font-bold mb-4">Language & Region</h3>
                                    <div>
                                        <select
                                            className="w-full px-4 py-3 bg-gray-800 border border-gray-700 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                            value={settings.language}
                                            onChange={(e) => handleSettingChange('language', e.target.value)}
                                        >
                                            <option>English</option>
                                            <option>EspaÃ±ol</option>
                                            <option>FranÃ§ais</option>
                                            <option>Deutsch</option>
                                            <option>ä¸­æ–‡</option>
                                        </select>
                                    </div>
                                </div>
                                
                                {/* Actions */}
                                <div className="space-y-3">
                                    <button
                                        onClick={() => {
                                            setModal({
                                                title: "Contact Support",
                                                body: "For account assistance, please email: mt5-base@hotmail.com"
                                            });
                                        }}
                                        className="w-full py-3 bg-gray-800 hover:bg-gray-700 rounded-lg font-semibold border border-gray-700"
                                    >
                                        Contact Support
                                    </button>
                                    <button
                                        onClick={() => {
                                            setModal({
                                                title: "Logout",
                                                body: "Are you sure you want to logout?",
                                                actions: [
                                                    { label: "Cancel", action: () => setModal(null) },
                                                    { 
                                                        label: "Logout", 
                                                        action: () => {
                                                            setUser(null);
                                                            setModal(null);
                                                            setView('landing');
                                                        }
                                                    }
                                                ]
                                            });
                                        }}
                                        className="w-full py-3 bg-red-600/20 hover:bg-red-600/30 rounded-lg font-semibold text-red-400 border border-red-500/30"
                                    >
                                        Logout
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                );
            };
            
            // ==================== MODAL COMPONENT ====================
            const ModalComponent = () => {
                if (!modal) return null;
                
                return (
                    <div className="fixed inset-0 z-[100] flex items-center justify-center p-4 bg-black/80">
                        <div className="bg-gray-900 rounded-xl border border-gray-700 w-full max-w-md overflow-hidden">
                            <div className="p-6">
                                <h3 className="text-xl font-bold mb-3">{modal.title}</h3>
                                <p className="text-gray-300 whitespace-pre-line mb-6">{modal.body}</p>
                                
                                <div className="flex gap-3">
                                    {modal.actions ? (
                                        modal.actions.map((action, index) => (
                                            <button
                                                key={index}
                                                onClick={action.action}
                                                className={`flex-1 py-3 rounded-lg font-semibold ${index === 0 ? 'bg-gray-800 hover:bg-gray-700 border border-gray-700' : 'bg-blue-600 hover:bg-blue-700'}`}
                                            >
                                                {action.label}
                                            </button>
                                        ))
                                    ) : (
                                        <button
                                            onClick={() => modal.onClose ? modal.onClose() : setModal(null)}
                                            className="flex-1 py-3 bg-blue-600 hover:bg-blue-700 rounded-lg font-semibold"
                                        >
                                            Close
                                        </button>
                                    )}
                                </div>
                            </div>
                        </div>
                    </div>
                );
            };
            
            // ==================== LOADING OVERLAY ====================
            const LoadingOverlay = () => {
                if (!loading) return null;
                
                return (
                    <div className="fixed inset-0 z-[110] flex flex-col items-center justify-center bg-black/90">
                        <span className="loader-ring mb-4"></span>
                        <h2 className="text-xl font-bold mb-2">{loadingText}</h2>
                        <p className="text-gray-400 text-center max-w-md">
                            {loadingText.includes("Authenticating") 
                                ? "Connecting to MetaTrader5.com servers..." 
                                : loadingText.includes("Processing")
                                ? "Validating transaction with blockchain..."
                                : "Please wait while we process your request..."}
                        </p>
                    </div>
                );
            };
            
            // ==================== MAIN RENDER ====================
            return (
                <div className="min-h-screen bg-gray-900">
                    {/* News Banner */}
                    <NewsBanner />
                    
                    {/* Main Navigation */}
                    <Navbar />
                    
                    {/* Main Content */}
                    <main className="pt-12">
                        {view === 'landing' && <Landing />}
                        {view === 'register' && <Register />}
                        {view === 'login' && <Login />}
                        {view === 'dashboard' && <Dashboard />}
                        {view === 'quotes' && <Quotes />}
                        {view === 'charts' && <Chart />}
                        {view === 'order' && <OrderTicket />}
                        {view === 'trade' && <TradePage />}
                        {view === 'deposit' && <Deposit />}
                        {view === 'history' && <History />}
                        {view === 'settings' && <Settings />}
                    </main>
                    
                    {/* Bottom Navigation (Mobile) */}
                    <BottomNav />
                    
                    {/* Modal */}
                    <ModalComponent />
                    
                    {/* Loading Overlay */}
                    <LoadingOverlay />
                </div>
            );
        };
        
        // ==================== RENDER APP ====================
        ReactDOM.render(<App />, document.getElementById('root'));
    </script>
</body>
</html>
